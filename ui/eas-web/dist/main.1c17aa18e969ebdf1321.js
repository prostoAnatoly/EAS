"use strict";(self.webpackChunkeas_web_ui=self.webpackChunkeas_web_ui||[]).push([[179],{8084:(e,t,r)=>{var n=r(7294),a=r(3935),s=r(9711),o=r(6974),l=r(9617),i=r(9164);class c{constructor(){this.exp=0}}const u=class{static getJwtInfoByToken(e){const t=this.getPayloadFromToken(e);if(t){const e=new c,r=JSON.parse(t);for(let t in r)e.hasOwnProperty(t)&&(e[t]=r[t]);return e}return null}static getPayloadFromToken(e){if(3===e.split(".").length){const t=e.split(".")[1];if(t){const e=t.replace(/-/g,"+").replace(/_/g,"/");return decodeURIComponent(window.atob(e).split("").map((function(e){return"%"+("00"+e.charCodeAt(0).toString(16)).slice(-2)})).join(""))}}return null}save(e){e&&(u.clear(),u.jwtInfo=u.getJwtInfoByToken(e),localStorage.setItem(u.TOKEN_STORAGE_KEY,e))}static get(){return localStorage.getItem(u.TOKEN_STORAGE_KEY)||""}static clear(){localStorage.removeItem(u.TOKEN_STORAGE_KEY),u.jwtInfo=null}static getJwtInfo(){if(null===u.jwtInfo){const e=u.get();e&&(u.jwtInfo=u.getJwtInfoByToken(e))}return u.jwtInfo}static getIsExpired(){const e=u.getJwtInfo();return null===e||Date.now()>=1e3*e.exp}};let m=u;m.TOKEN_STORAGE_KEY="eas_public_tokenKey",m.jwtInfo=null;class p{}p.ROOT_APP="";const d=class extends p{};let h=d;h.REGISTRATION=d.ROOT_APP+"/registration",h.USER_REGISTRATION=d.ROOT_APP+"/registration/user/new",h.JOIN_TO_ORGANIZATION=d.ROOT_APP+"/join-to-organization",h.AGREEMENT_USER=d.ROOT_APP+"/user/agreement";const g=class extends p{};let E=g;E.ROOT=g.ROOT_APP+"/",E.FORBIDDEN=g.ROOT_APP+"/forbidden",E.NOT_FOUND=g.ROOT_APP+"/not-found",E.LOGIN=g.ROOT_APP+"/login",E.NO_CONNECTION_TO_SERVER=g.ROOT_APP+"/no_connect";const f=class extends p{};let v=f;v.ORGANIZATIONS=f.ROOT_APP+"/organizations",v.CREATE_ORGANIZATION=f.ROOT_APP+"/organizations/add";var y=r(1508);const b=()=>n.createElement(y.Z,{component:"div",sx:{fontSize:"calc(10px + 2vw)",color:"chocolate",marginTop:e=>e.spacing(1)}},"Система учёта сотрудников");function w(){return n.createElement(n.Fragment,null,n.createElement(b,null))}var O=r(6914),x=r(948),P=r(2428),N=Object.defineProperty,C=Object.defineProperties,R=Object.getOwnPropertyDescriptors,T=Object.getOwnPropertySymbols,S=Object.prototype.hasOwnProperty,Z=Object.prototype.propertyIsEnumerable,I=(e,t,r)=>t in e?N(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r;const A=(0,x.ZP)(O.Z)((({theme:e})=>({backgroundColor:e.palette.success.main,color:e.palette.success.contrastText,"&:hover":{backgroundColor:e.palette.success.dark},"&:disabled":{backgroundColor:e.palette.success.light}})));function k(e){return n.createElement(A,(t=((e,t)=>{for(var r in t||(t={}))S.call(t,r)&&I(e,r,t[r]);if(T)for(var r of T(t))Z.call(t,r)&&I(e,r,t[r]);return e})({},e),r={startIcon:n.createElement(P.Z,null)},C(t,R(r))));var t,r}var M=r(4669),D=Object.defineProperty,V=Object.defineProperties,j=Object.getOwnPropertyDescriptors,_=Object.getOwnPropertySymbols,F=Object.prototype.hasOwnProperty,B=Object.prototype.propertyIsEnumerable,z=(e,t,r)=>t in e?D(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r;const U=(0,x.ZP)(O.Z)((({theme:e})=>({backgroundColor:e.palette.primary.main,color:e.palette.primary.contrastText,"&:hover":{backgroundColor:e.palette.primary.dark},"&:disabled":{backgroundColor:e.palette.primary.light}})));function L(e){return n.createElement(U,(t=((e,t)=>{for(var r in t||(t={}))F.call(t,r)&&z(e,r,t[r]);if(_)for(var r of _(t))B.call(t,r)&&z(e,r,t[r]);return e})({},e),r={startIcon:n.createElement(M.Z,null)},V(t,j(r))));var t,r}Object.defineProperty,Object.defineProperties,Object.getOwnPropertyDescriptors,Object.getOwnPropertySymbols,Object.prototype.hasOwnProperty,Object.prototype.propertyIsEnumerable,(0,x.ZP)(O.Z)((({theme:e})=>({backgroundColor:e.palette.error.main,color:e.palette.error.contrastText,"&:hover":{backgroundColor:e.palette.error.dark},"&:disabled":{backgroundColor:e.palette.error.light}}))),Object.defineProperty,Object.defineProperties,Object.getOwnPropertyDescriptors,Object.getOwnPropertySymbols,Object.prototype.hasOwnProperty,Object.prototype.propertyIsEnumerable,(0,x.ZP)(O.Z)((({theme:e})=>({backgroundColor:e.palette.secondary.main,color:e.palette.secondary.contrastText,"&:hover":{backgroundColor:e.palette.secondary.dark},"&:disabled":{backgroundColor:e.palette.secondary.light}})));var G=r(2456),$=Object.defineProperty,W=Object.defineProperties,H=Object.getOwnPropertyDescriptors,K=Object.getOwnPropertySymbols,q=Object.prototype.hasOwnProperty,J=Object.prototype.propertyIsEnumerable,Y=(e,t,r)=>t in e?$(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r;const X=(0,x.ZP)(O.Z)((({theme:e})=>({backgroundColor:e.palette.primary.main,color:e.palette.primary.contrastText,"&:hover":{backgroundColor:e.palette.primary.dark},"&:disabled":{backgroundColor:e.palette.primary.light}})));function Q(e){return n.createElement(X,(t=((e,t)=>{for(var r in t||(t={}))q.call(t,r)&&Y(e,r,t[r]);if(K)for(var r of K(t))J.call(t,r)&&Y(e,r,t[r]);return e})({},e),r={startIcon:n.createElement(G.Z,null)},W(t,H(r))));var t,r}var ee=r(3298),te=Object.defineProperty,re=Object.defineProperties,ne=Object.getOwnPropertyDescriptors,ae=Object.getOwnPropertySymbols,se=Object.prototype.hasOwnProperty,oe=Object.prototype.propertyIsEnumerable,le=(e,t,r)=>t in e?te(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r;const ie=(0,x.ZP)(O.Z)((({theme:e})=>({backgroundColor:"#457cc7",color:e.palette.primary.contrastText,"&:hover":{backgroundColor:"#2f4e98"},"&:disabled":{backgroundColor:"#c2e0f7"}})));function ce(e){return n.createElement(ie,(t=((e,t)=>{for(var r in t||(t={}))se.call(t,r)&&le(e,r,t[r]);if(ae)for(var r of ae(t))oe.call(t,r)&&le(e,r,t[r]);return e})({},e),r={startIcon:n.createElement(ee.Z,null)},re(t,ne(r))));var t,r}var ue=r(6693);(0,x.ZP)(O.Z)((({theme:e})=>({backgroundColor:e.palette.secondary.main,color:e.palette.secondary.contrastText,"&:hover":{backgroundColor:e.palette.secondary.dark}}))),(0,x.ZP)(ue.Z)((({theme:e})=>({backgroundColor:e.palette.primary.main,color:e.palette.primary.contrastText}))),(0,x.ZP)(O.Z)((({theme:e})=>({backgroundColor:e.palette.secondary.main,color:e.palette.secondary.contrastText,"&:hover":{backgroundColor:e.palette.secondary.dark}}))),(0,x.ZP)(ue.Z)((({theme:e})=>({backgroundColor:e.palette.primary.main,color:e.palette.primary.contrastText})));var me=r(9062);function pe(e){var t;const r=null!=(t=e.text)?t:"Идет загрузка данных...";return n.createElement(y.Z,{component:"div",sx:{textAlign:"center"}},n.createElement(me.Z,null),n.createElement("div",null,n.createElement(y.Z,{component:"span",sx:{paddingTop:e=>e.spacing(2)}},r)))}var de=r(854),he=r(6186),ge=r(3155);function Ee(e){return n.createElement(de.Z,{sx:{"& .MuiAlert-icon":{"& svg":{display:"none"}}},open:e.message.length>0,onClose:()=>e.handleCloseMessage()},n.createElement(he.Z,{elevation:6,onClose:()=>e.handleCloseMessage(),severity:"error"},n.createElement(ge.Z,null,"������"),e.message))}var fe=r(4680);const ve={paper:{padding:e=>e.spacing(2),backgroundColor:"var(--EAS-BACKGROUND-COLOR-MAIN)"}};function ye(e){return n.createElement(fe.Z,{sx:ve.paper,elevation:0},e.children)}class be{constructor(e,t){this.to=e,this.text=t}}function we(){return n.createElement("hr",{style:{color:"#7a59d9",height:"1px",backgroundColor:"#7a59d9",border:"0 none"}})}var Oe=r(6020);function xe(e){return n.createElement(n.Fragment,null,e.isLoading&&n.createElement(Oe.Z,{sx:{zIndex:e=>e.zIndex.drawer+1,color:"#fff"},open:e.isLoading},n.createElement(pe,{text:e.text})))}var Pe=Object.defineProperty,Ne=Object.getOwnPropertySymbols,Ce=Object.prototype.hasOwnProperty,Re=Object.prototype.propertyIsEnumerable,Te=(e,t,r)=>t in e?Pe(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r;const Se=(0,x.ZP)(y.Z)((({theme:e})=>({width:"100%",marginTop:e.spacing(1)})));function Ze(e){return n.createElement(n.Fragment,null,e.children&&n.createElement(Se,((e,t)=>{for(var r in t||(t={}))Ce.call(t,r)&&Te(e,r,t[r]);if(Ne)for(var r of Ne(t))Re.call(t,r)&&Te(e,r,t[r]);return e})({},e.boxProps),e.children))}var Ie=r(3460);function Ae(e){return n.createElement(n.Fragment,null,e.message&&n.createElement(Ie.Z,{error:!0},e.message))}var ke=Object.defineProperty,Me=Object.getOwnPropertySymbols,De=Object.prototype.hasOwnProperty,Ve=Object.prototype.propertyIsEnumerable,je=(e,t,r)=>t in e?ke(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r;const _e=(0,x.ZP)(y.Z)((()=>({display:"flex",width:"100%"})));function Fe(e){return n.createElement(n.Fragment,null,e.children&&n.createElement(_e,((e,t)=>{for(var r in t||(t={}))De.call(t,r)&&je(e,r,t[r]);if(Me)for(var r of Me(t))Ve.call(t,r)&&je(e,r,t[r]);return e})({},e.boxProps),e.children))}var Be=r(2658);function ze(e){return n.createElement(n.Fragment,null,e.children&&n.createElement(Be.Z,{component:"h1",variant:"h5"},e.children))}var Ue=Object.defineProperty,Le=Object.getOwnPropertySymbols,Ge=Object.prototype.hasOwnProperty,$e=Object.prototype.propertyIsEnumerable,We=(e,t,r)=>t in e?Ue(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r;const He=(0,x.ZP)(y.Z)((({theme:e})=>({marginTop:e.spacing(4),display:"flex",flexDirection:"column",alignItems:"center"})));function Ke(e){return n.createElement(n.Fragment,null,e.children&&n.createElement(He,((e,t)=>{for(var r in t||(t={}))Ge.call(t,r)&&We(e,r,t[r]);if(Le)for(var r of Le(t))$e.call(t,r)&&We(e,r,t[r]);return e})({},e.boxProps),e.children))}var qe=Object.defineProperty,Je=Object.getOwnPropertySymbols,Ye=Object.prototype.hasOwnProperty,Xe=Object.prototype.propertyIsEnumerable,Qe=(e,t,r)=>t in e?qe(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r;const et=(0,x.ZP)(y.Z)((({theme:e})=>({marginTop:e.spacing(3),width:"100%",display:"block",textAlign:"right",paddingRight:e.spacing(2)})));function tt(e){return n.createElement(n.Fragment,null,e.children&&n.createElement(et,((e,t)=>{for(var r in t||(t={}))Ye.call(t,r)&&Qe(e,r,t[r]);if(Je)for(var r of Je(t))Xe.call(t,r)&&Qe(e,r,t[r]);return e})({},e.boxProps),e.children))}var rt=Object.defineProperty,nt=Object.getOwnPropertySymbols,at=Object.prototype.hasOwnProperty,st=Object.prototype.propertyIsEnumerable,ot=(e,t,r)=>t in e?rt(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r;const lt=(0,x.ZP)(fe.Z)((({theme:e})=>({padding:e.spacing(2),backgroundColor:"snow"})));function it(e){return n.createElement(lt,((e,t)=>{for(var r in t||(t={}))at.call(t,r)&&ot(e,r,t[r]);if(nt)for(var r of nt(t))st.call(t,r)&&ot(e,r,t[r]);return e})({},e.paperProps),n.createElement(Ke,{boxProps:e.boxProps},e.children))}var ct=r(1988),ut=r(5652),mt=r(7109),pt=r(1079),dt=r(6089),ht=r(720);class gt{validation(){let e=0,t=!0;for(var r in this){const n=this[r];n&&(n.validation()||(0===e&&n.focus(),t=!1,e++))}return t}setDisabled(e){for(var t in this){const r=this[t];r&&(r.props.disabled=e||r.props.allwaysDisabled)}}isChanged(){for(var e in this){const t=this[e];if(t&&t.isChanged())return!0}return!1}}var Et=r(9539);const ft=["января","февраля","марта","апреля","мая","июня","июля","августа","сентября","октября","ноября","декабря"];function vt(e){return{yyyy:e.getFullYear().toString(),mm:(e.getMonth()+1).toString(),day:e.getDate().toString(),h:e.getHours().toString(),m:e.getMinutes().toString(),s:e.getSeconds().toString()}}function yt(e){return e.length<2?"0"+e:e}function bt(e){if((0,Et.isNullOrUndefined)(e))return"";const t=new Date(e);let{yyyy:r,mm:n,day:a}=vt(t);return`${r}-${yt(n)}-${yt(a)}`}function wt(e){if(!(0,Et.isNullOrUndefined)(e)){let t=e.split("T")[0].split("-");if(t.length>=3){const e=Number(t[0]),r=Number(t[1])-1,n=Number(t[2]),a=new Date(e,r,n);return a.setFullYear(e),a.setHours(0,0,0,0),a}}}function Ot(e,t){return e.setFullYear(e.getFullYear()+t),e}function xt(e){if((0,Et.isNullOrUndefined)(e))return"";const t=new Date(e),r=ft[t.getMonth()];return`${t.getDate().toString()} ${yt(r)}`}class Pt{}function Nt(e,t,r){const[a,s]=Rt(!1),o=(0,n.useCallback)((t=>{return n=this,null,o=function*(){if(a)return;s(!0);const n=new Pt;n.tag=t;try{yield e(n)}catch(e){console.log(e),r&&r(e)}finally{s(!1)}},new Promise(((e,t)=>{var r=e=>{try{s(o.next(e))}catch(e){t(e)}},a=e=>{try{s(o.throw(e))}catch(e){t(e)}},s=t=>t.done?e(t.value):Promise.resolve(t.value).then(r,a);s((o=o.apply(n,null)).next())}));var n,o}),[a,...t]);return[a,o]}function Ct(){return(0,o.TH)().pathname.split("/")}function Rt(e,t){const[r,a]=(0,n.useState)(e),s=function(e){const t=(0,n.useRef)(!0);return(0,n.useEffect)((()=>(e&&e(),()=>{t.current=!1})),[]),t}(t);return[r,e=>{s.current&&a(e)}]}function Tt(){const{search:e}=(0,o.TH)();return(0,n.useMemo)((()=>new URLSearchParams(e)),[e])}class St{static getValue(e){return e&&e.current?e.current.value:""}static setValue(e,t){e&&e.current&&(e.current.value=t)}}var Zt=Object.defineProperty,It=Object.defineProperties,At=Object.getOwnPropertyDescriptors,kt=Object.getOwnPropertySymbols,Mt=Object.prototype.hasOwnProperty,Dt=Object.prototype.propertyIsEnumerable,Vt=(e,t,r)=>t in e?Zt(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,jt=(e,t)=>{for(var r in t||(t={}))Mt.call(t,r)&&Vt(e,r,t[r]);if(kt)for(var r of kt(t))Dt.call(t,r)&&Vt(e,r,t[r]);return e},_t=(e,t)=>It(e,At(t));class Ft{constructor(e){this.validation=e}}class Bt{constructor(e){this.props=e,this.emptyValidationResult=new sr(!1,""),this.isSetValueRef=n.useRef(!1),this.inputRef=n.useRef(null),this.state=Rt(new Ft(this.emptyValidationResult)),this.initialValueRef=n.useRef(e.initialValue),this.onChangeValue=this.onChangeValue.bind(this)}processNewValue(e){return e}getValue(){return this.isSetValueRef.current||!this.initialValueRef.current?St.getValue(this.inputRef):this.initialValueRef.current}setNewInitialValue(e){const t=this.setValueOnly(e);this.initialValueRef.current=t}setValue(e){const t=this.setValueOnly(e),r=this.getValidResult(t);this.initialValueRef.current=t,this.isSetValueRef.current=!0,this.state[1]((e=>_t(jt({},e),{validation:r})))}isChanged(){return(this.initialValueRef.current||"")!==this.getValue()}setValueInner(e){const t=this.setValueOnly(e),r=this.getValidResult(t);this.isSetValueRef.current=!0,this.state[1]((e=>_t(jt({},e),{validation:r})))}setValueOnly(e){e=null!=e?e:"";const t=this.processNewValue(e);return St.setValue(this.inputRef,t),t}onChangeValue(e){var t;let r=null!=(t=e.target.value)?t:"";r=this.processNewValue(r);const n=this.getValidResult(r);this.state[1]((e=>_t(jt({},e),{validation:n}))),this.props.onChangeValue&&this.props.onChangeValue()}getValidResult(e){let t=this.emptyValidationResult;if(0!==this.props.validations.length)for(let r of this.props.validations)if(t=r.validation(e),t.getInvalid())break;return t}validation(){const e=this.getValue(),t=this.getValidResult(e);return this.state[1]((e=>_t(jt({},e),{validation:t}))),!t.getInvalid()}isValid(){const e=this.getValue();return!this.getValidResult(e).getInvalid()}focus(){this.inputRef&&this.inputRef.current&&this.inputRef.current.focus()}isRequired(){return this.props.validations.some((e=>e instanceof or))}getStyleField(){return{margin:e=>e.spacing(2,1,1).toString()+" !important"}}getInputPropsBase(){const e={};return this.props.validations&&(this.setMaxLength(e),this.setMaxDate(e),this.setMinDate(e)),e}getValidationInfo(){return this.state[0].validation}setMaxLength(e){const t=this.props.validations.find((e=>e instanceof ir));t&&(e.maxLength=t.maxLength)}setMaxDate(e){const t=this.props.validations.find((e=>e instanceof ur));t&&(e.max=bt(t.maxDate))}setMinDate(e){const t=this.props.validations.find((e=>e instanceof cr));t&&(e.min=bt(t.minDate))}}var zt=r(8314),Ut=r(6627),Lt=r.n(Ut);class Gt extends Bt{constructor(e,t,r){super(e),this.props=e,this.mask=t,this.maskChar=r}processNewValue(e){return this.clean(e)}getValue(){return this.clean(super.getValue())}view(){const e=this.isRequired(),t=this.getInputPropsBase(),r=this.getStyleField();return n.createElement(Lt(),{mask:this.mask,maskChar:this.maskChar,disabled:this.props.disabled,value:this.getValue(),onChange:this.onChangeValue},(()=>n.createElement(zt.Z,{inputRef:this.inputRef,sx:r,disabled:this.props.disabled,error:this.getValidationInfo().getInvalid(),helperText:this.getValidationInfo().getErrorText(),margin:"normal",fullWidth:!0,label:this.props.title,type:"text",required:e,variant:"outlined",autoFocus:this.props.isAutofocus,InputLabelProps:{shrink:!0},inputProps:t})))}}class $t extends Bt{constructor(e){super(e),this.props=e}view(){const e=this.isRequired(),t=this.getInputPropsBase(),r=this.getStyleField();return n.createElement(zt.Z,{sx:r,inputRef:this.inputRef,onChange:this.onChangeValue,value:this.getValue(),onKeyPress:this.props.onKeyPress,disabled:this.props.disabled,error:this.getValidationInfo().getInvalid(),helperText:this.getValidationInfo().getErrorText(),margin:"normal",fullWidth:!0,label:this.props.title,type:"text",required:e,variant:"outlined",autoFocus:this.props.isAutofocus,InputLabelProps:{shrink:!0},inputProps:t})}}var Wt=r(270),Ht=r(6867),Kt=r(5697),qt=r(2186);class Jt extends Bt{constructor(e){super(e),this.props=e,this.statePassword=Rt(!1)}view(){const e=this.isRequired(),t=this.getInputPropsBase(),r=this.getStyleField(),a=this.statePassword[0];return n.createElement(zt.Z,{sx:r,inputRef:this.inputRef,onChange:this.onChangeValue,value:this.getValue(),onKeyPress:this.props.onKeyPress,disabled:this.props.disabled,error:this.getValidationInfo().getInvalid(),helperText:this.getValidationInfo().getErrorText(),margin:"normal",fullWidth:!0,label:this.props.title,type:a?"text":"password",required:e,variant:"outlined",autoFocus:this.props.isAutofocus,autoComplete:this.props.autocomplete,InputLabelProps:{shrink:!0},inputProps:t,InputProps:{endAdornment:n.createElement(Wt.Z,{position:"end"},n.createElement(Ht.Z,{size:"small","aria-label":"toggle password visibility",onClick:()=>{this.statePassword[1]((e=>!e))},onMouseDown:e=>{e.preventDefault()}},a?n.createElement(Kt.Z,null):n.createElement(qt.Z,null)))}})}}class Yt extends Bt{constructor(e){super(e),this.props=e}getValueToJson(){var e=super.getValue();if(e)return function(e){if((0,Et.isNullOrUndefined)(e))return;const t=wt(e);if((0,Et.isNullOrUndefined)(t))return;const{yyyy:r,mm:n,day:a}=vt(t);return`${r}-${yt(n)}-${yt(a)}T00:00:00`}(e)}processNewValue(e){return e?bt(new Date(e)):e}view(){const e=this.isRequired(),t=this.getInputPropsBase(),r=this.getStyleField();return n.createElement(zt.Z,{sx:r,inputRef:this.inputRef,onChange:this.onChangeValue,value:this.getValue(),disabled:this.props.disabled,error:this.getValidationInfo().getInvalid(),helperText:this.getValidationInfo().getErrorText(),margin:"normal",fullWidth:!0,label:this.props.title,type:"date",required:e,variant:"outlined",autoFocus:this.props.isAutofocus,InputLabelProps:{shrink:!0},inputProps:t})}}class Xt extends Gt{constructor(e){super(e,"+7 999 999 99 99"," "),this.props=e}clean(e){return e&&(e=e.replace(/\D+/g,"")),e}}var Qt=r(6446),er=r(476),tr=r(165),rr=r(542),nr=r(3063);class ar extends Bt{constructor(e){super(e),this.props=e}view(){const e=this.getStyleField();return n.createElement(Qt.Z,{sx:e,component:"fieldset",disabled:this.props.disabled},n.createElement(er.Z,{component:"legend"},this.props.title),n.createElement(zt.Z,{sx:{display:"none !important"},inputRef:this.inputRef,value:this.getValue()}),n.createElement(tr.Z,{row:!0,name:"row-radio-buttons-group",value:this.getValue(),onChange:e=>{const t=e.target.value;this.setValueInner(t),this.props.onChangeValue&&this.props.onChangeValue()}},this.props.items.map(((e,t)=>n.createElement(rr.Z,{key:t,value:e.value,control:n.createElement(nr.Z,null),label:e.text})))),this.getValidationInfo().getInvalid()?n.createElement(Ie.Z,{error:this.getValidationInfo().getInvalid()},this.getValidationInfo().getErrorText()):null)}}class sr{constructor(e,t){this.invalid=e,this.errorText=t}getErrorText(){return this.invalid?this.errorText:""}getInvalid(){return this.invalid}}class or{validation(e){let t=!1,r="";return e?(t=!0,""===e.trim()&&(t=!1,r="Не может содержать одни пробелы")):r="Не может быть пусто",new sr(!t,r)}}class lr{constructor(){this.lenPhone=11}validation(e){let t=!1,r="";return e&&(e=e.replace(/\D+/g,"")).length!==this.lenPhone&&(t=!0,r=`Номер телефона должен содержать ${this.lenPhone} цифр`),new sr(t,r)}}class ir{constructor(e){this.maxLength=e}validation(e){let t=!0,r="";return e&&e.length>this.maxLength&&(t=!1,r=`Превышена максимальная длина. Ожидалось ${this.maxLength}`),new sr(!t,r)}}class cr{constructor(e){this.minDate=e}validation(e){let t=!0,r="";if(e){const n=wt(e);n&&n<this.minDate&&(t=!1,r=`Дата должна быть больше или равна ${bt(this.minDate)}`)}return new sr(!t,r)}static getMinDate(){return new cr(new Date(1901,0,1))}}class ur{constructor(e){this.maxDate=e}validation(e){let t=!0,r="";if(e){const n=wt(e);n&&n>this.maxDate&&(t=!1,r=`Дата должна быть меньше или равна ${bt(this.maxDate)}`)}return new sr(!t,r)}}const mr=class{validation(e){let t=!0,r="Адрес электронной почты некорректный";return e&&!e.match(mr.MAIL_FORMAT)||(t=!1,r=""),new sr(t,r)}};let pr=mr;pr.MAIL_FORMAT=/[a-z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-z0-9!#$%&'*+/=?^_`{|}~-]+)*@(?:[a-z0-9](?:[a-z0-9-]*[a-z0-9])?\.)+[a-z0-9](?:[a-z0-9-]*[a-z0-9])?/;class dr{constructor(e){this.minLength=e}validation(e){let t=!0,r="";return e&&e.length<this.minLength&&(t=!1,r=`Длина должна быть не менее ${this.minLength}`),new sr(!t,r)}}class hr{constructor(e,t){this.value=e,this.text=t}}var gr,Er;(Er=gr||(gr={})).FORBIDDEN_RESOURCE="resource",Er.BACK="back",Er.ERROR="error",Er.TARGET="target";class fr extends Error{constructor(e,t){super(t),this.statusCode=e}static createFromPromiseCatch(e){return e instanceof fr?e:(console.log(e),new fr(0,"Что-то пошло не так. Код ошибки F-0"))}}class vr{constructor(e,t,r){this.name=e,this.surname=t,this.patronymic=r}ToString(){const e=this.surname||"",t=this.name||"";return this.patronymic?`${e} ${t} ${this.patronymic}`:`${e} ${t}`}}class yr{constructor(e,t,r){this.fullName=e,this.avatarUrl=t,this.userName=r}}class br{constructor(e){this.pipelineBehaviors=e}send(e){let t=()=>e.execute();return this.pipelineBehaviors&&(t=this.pipelineBehaviors.reverse().reduce(((t,r)=>()=>r.handle(e,t)),t)),t()}}const wr=class{static RegistraionConsumer(e){wr.consumers.push(e)}static getConsumers(){return wr.consumers}};let Or=wr;Or.consumers=[];class xr{publishEvent(e){return new Promise((t=>{const r=Or.getConsumers().filter((t=>t.eventName===e.eventName));if(0===r.length)throw console.log("Отсутствует потребитель события "+e.eventName),new Error("Что-то пошло не так. Код ошибки F-50");r.forEach((t=>{return r=this,null,n=function*(){return yield t.Consume(e)},new Promise(((e,t)=>{var a=e=>{try{o(n.next(e))}catch(e){t(e)}},s=e=>{try{o(n.throw(e))}catch(e){t(e)}},o=t=>t.done?e(t.value):Promise.resolve(t.value).then(a,s);o((n=n.apply(r,null)).next())}));var r,n}))}))}}class Pr{clear(){m.clear()}create(e){(new m).save(e)}}const Nr=class{constructor(e=null,t=!1,r=null){this.accessToken=e,this.isAllowCanceling=t,this.headers=r,this.abortController=null,this.defaultErrorMessages=this.getDefaultErrorMessages(),this.locationWhereCalled=location.href}static getDefaultSharedErrorMessages(){return{}}static createHttpRequestError(e,t){return new fr(e,t)}pushErrorMessage(e,t,r){const n=e[t];n?(n.message||(n.message=r.message),n.handler||(n.handler=r.handler)):e[t]=r}getDefaultErrorMessages(){const e=Nr.sharedErrorMessages;return this.pushErrorMessage(e,0,{message:Nr.ERR_CONNECTION_REFUSED_TEXT,handler:this.processEmptyError}),this.pushErrorMessage(e,400,{message:"Данные не корректны",handler:(e,t)=>{if(e.body)return e.json().catch((()=>{throw Nr.createHttpRequestError(e.status,t)})).then((r=>{if(r&&r.payload){const n=r.payload;let a=r.payload.messageBase||"";if(n.errors)for(const[e,t]of Object.entries(n.errors))t.messages&&(a&&(a+=". "),a+=t.messages.join(" "));throw Nr.createHttpRequestError(e.status,a||t)}throw Nr.getUnexpectedResponseFromServer()}));throw Nr.createHttpRequestError(e.status,t)}}),this.pushErrorMessage(e,401,{message:"Вы не авторизованы",handler:this.processEmptyError}),this.pushErrorMessage(e,403,{message:"Доступ запрещён",handler:this.processEmptyError}),this.pushErrorMessage(e,404,{message:"Запрашиваемый ресурс не найден",handler:this.processStandardError}),this.pushErrorMessage(e,405,{message:"Метод не поддерживается",handler:this.processEmptyError}),this.pushErrorMessage(e,409,{message:"Отсутствует соединение с сервером",handler:this.processStandardError}),this.pushErrorMessage(e,429,{message:"Достигнут предел кол-ва попыток",handler:(e,t)=>{if(e.body)return e.json().catch((()=>{throw Nr.createHttpRequestError(e.status,t)})).then((r=>{if(r&&r.payload)throw Nr.createHttpRequestError(e.status,t);throw Nr.getUnexpectedResponseFromServer()}));throw Nr.createHttpRequestError(e.status,t)}}),this.pushErrorMessage(e,500,{message:"Внутренняя ошибка сервера",handler:this.processStandardError}),this.pushErrorMessage(e,503,{message:"Сервер недоступен",handler:this.processEmptyError}),this.pushErrorMessage(e,504,{message:"Таймаут",handler:this.processEmptyError}),e}processStandardError(e,t){if(e.body)return e.json().catch((()=>{throw Nr.createHttpRequestError(e.status,t)})).then((r=>{if(r&&r.payload){const n=r.payload.messageBase||"";throw Nr.createHttpRequestError(e.status,n||t)}throw Nr.getUnexpectedResponseFromServer()}));throw Nr.createHttpRequestError(e.status,t)}processEmptyError(e,t){throw Nr.createHttpRequestError(e.status,t)}static getUnexpectedResponseFromServer(){return Nr.createHttpRequestError(0,"Непредвиденный ответ от сервера")}processHandler(e){if(!e.ok){const t=e.status,r=this.defaultErrorMessages[t];if(void 0!==r){let t=r.handler(e,r.message,this.locationWhereCalled);return t||(t=this.processStandardError(e,r.message)),t.then((()=>{}))}throw Nr.createHttpRequestError(e.status,"Непредвиденная ошибка сервера")}return e.json().then((e=>{if(e&&e.payload)return e.payload;throw Nr.getUnexpectedResponseFromServer()}))}getFullUrl(e){let t="https://localhost:7001";return t||(t=""),e.startsWith("/")?t+e:e}send(e,t,r){const n=new Headers;n.append("Accept",Nr.MEMI_APP_JSON),t!==Nr.POST&&t!==Nr.PUT||n.append("Content-Type",Nr.MEMI_APP_JSON),this.accessToken&&n.append("Authorization",`Bearer ${this.accessToken}`),this.headers&&this.headers.forEach(((e,t)=>n.append(t,e)));const a={method:t,body:r?JSON.stringify(r):null,headers:n};if(e instanceof Request){const t=e;e=new Request(this.getFullUrl(t.url),t)}else{const t=e;e=this.getFullUrl(t)}return this.isAllowCanceling&&(this.abortController=new AbortController,a.signal=this.abortController.signal),fetch(e,a).catch((()=>{return e=this,null,t=function*(){if(!Nr.handlerErrConnectionRefuused)throw Nr.createHttpRequestError(0,Nr.ERR_CONNECTION_REFUSED_TEXT);yield Nr.handlerErrConnectionRefuused()},new Promise(((r,n)=>{var a=e=>{try{o(t.next(e))}catch(e){n(e)}},s=e=>{try{o(t.throw(e))}catch(e){n(e)}},o=e=>e.done?r(e.value):Promise.resolve(e.value).then(a,s);o((t=t.apply(e,null)).next())}));var e,t})).then((e=>{if(e)return this.processHandler(e)}))}static setHandlerErrConnectionRefuused(e){Nr.handlerErrConnectionRefuused=e}static addResponseHandlerByStatusCode(e,t){const r=Nr.sharedErrorMessages[e];void 0!==r?r.handler=t:Nr.sharedErrorMessages[e]={message:"",handler:t}}post(e,t){return this.send(e,Nr.POST,t)}put(e,t){return this.send(e,Nr.PUT,t)}delete(e){return this.send(e,Nr.DELETE)}get(e){return this.send(e,Nr.GET)}cancel(){this.isAllowCanceling&&this.abortController&&this.abortController.abort()}};let Cr=Nr;Cr.ERR_CONNECTION_REFUSED_TEXT="Отсутствует соединение с сервером",Cr.POST="POST",Cr.PUT="PUT",Cr.GET="GET",Cr.DELETE="DELETE",Cr.MEMI_APP_JSON="application/json",Cr.sharedErrorMessages=Nr.getDefaultSharedErrorMessages();const Rr=class{static createHttpClient(e="1.0",t=!1){const r=new Map;return e&&r.set(Rr.headerVersionName,e),new Cr(null,t,r)}static createHttpClientWithAuth(e="1.0",t=!1){const r=new Map;return e&&r.set(Rr.headerVersionName,e),new Cr(m.get(),t,r)}};let Tr=Rr;Tr.headerVersionName="api-version";class Sr{login(e,t){const r={userName:e,password:window.btoa(t)};return Tr.createHttpClient().post("/api/auth/login",r)}}const Zr=class{checkInvitationCode(e){const t=`${Zr.baseUrl}/check/${e}`;return Tr.createHttpClientWithAuth().post(t)}};let Ir=Zr;Ir.baseUrl="/api/invitations";const Ar=class{static getUserModel(e,t){return{userName:e,password:window.btoa(t)}}registrationUser(e,t){const r=`${Ar.baseUrl}/user/`,n=Tr.createHttpClientWithAuth(),a=Ar.getUserModel(e,t);return n.post(r,a)}registrationUserByCode(e,t,r){const n=`${Ar.baseUrl}/user-by-code/${e}`,a=Tr.createHttpClientWithAuth(),s=Ar.getUserModel(t,r);return a.post(n,s)}};let kr=Ar;kr.baseUrl="/api/registration";class Mr{me(){return Tr.createHttpClientWithAuth().get("/api/users/me")}}const Dr=class{static getRegistrationClient(){return new kr}static getIdentityClient(){return new Sr}static getTokenService(){return new Pr}static getUsersClient(){return new Mr}static getInvitationsClient(){return new Ir}static getServiceBus(){return Dr.serviceBus}static GetMediator(){return Dr.mediator}};let Vr=Dr;Vr.serviceBus=new xr,Vr.mediator=new br;var jr=r(8949);class _r{constructor(e,t){this.value=e,this.expPerSecond=t}}class Fr{static Get(e){const t=localStorage.getItem(e);let r;if(t)try{r=JSON.parse(t),r&&r.expPerSecond&&Date.now()>=r.expPerSecond&&(r=void 0)}catch(e){r=void 0}return null==r?void 0:r.value}static Push(e,t,r){r&&(r=Date.now()+1e3*r);const n=new _r(t,r);localStorage.setItem(e,JSON.stringify(n))}static Remove(e){localStorage.removeItem(e)}}const Br=class extends class{constructor(e){this.storageKey=e}save(e){Fr.Push(this.storageKey,e,void 0)}get(){return Fr.Get(this.storageKey)}delete(){Fr.Remove(this.storageKey)}}{constructor(){super(Br.STORAGE_KEY)}};let zr=Br;zr.STORAGE_KEY="eas_public_profile";const Ur=class{constructor(){this._profile=void 0,this._profile=Ur.cache.get(),(0,jr.ky)(this)}get Profile(){return this._profile}set Profile(e){this._profile=e,e?Ur.cache.save(e):Ur.cache.delete()}};let Lr=Ur;Lr.cache=new zr;const Gr=new Lr;class $r{constructor(e,t){this.userName=e,this.password=t,this.identityClient=Vr.getIdentityClient(),this.usersClient=Vr.getUsersClient()}execute(){return this.identityClient.login(this.userName,this.password).then((e=>{if(e.accessToken)return Vr.getTokenService().create(e.accessToken),Promise.resolve();throw new Error("Вы не авторизованы")})).then((e=>this.usersClient.me().then((e=>{Gr.Profile=new yr(new vr(e.fullName.name,e.fullName.surname,e.fullName.patronymic),e.avatarUrl,e.userName)})).catch((e=>{throw Vr.getTokenService().clear(),e})))).catch((e=>{throw Vr.getTokenService().clear(),console.log(e),new Error("Что-то пошло не так. Код ошибки F-10")}))}}const Wr=class{constructor(){this.eventName=Wr.EVENT_NAME}};let Hr=Wr;Hr.EVENT_NAME="RegisterLoginedIntegrationEvent";var Kr=Object.defineProperty,qr=Object.defineProperties,Jr=Object.getOwnPropertyDescriptors,Yr=Object.getOwnPropertySymbols,Xr=Object.prototype.hasOwnProperty,Qr=Object.prototype.propertyIsEnumerable,en=(e,t,r)=>t in e?Kr(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,tn=(e,t)=>{for(var r in t||(t={}))Xr.call(t,r)&&en(e,r,t[r]);if(Yr)for(var r of Yr(t))Qr.call(t,r)&&en(e,r,t[r]);return e},rn=(e,t)=>qr(e,Jr(t)),nn=(e,t,r)=>new Promise(((n,a)=>{var s=e=>{try{l(r.next(e))}catch(e){a(e)}},o=e=>{try{l(r.throw(e))}catch(e){a(e)}},l=e=>e.done?n(e.value):Promise.resolve(e.value).then(s,o);l((r=r.apply(e,t)).next())}));class an extends gt{constructor(){super(...arguments),this.userName=new $t({validations:[new or,new pr],title:"Логин",isAutofocus:!0}),this.pwd=new Jt({validations:[new or,new ir(24)],title:"Пароль"})}}class sn{constructor(e,t,r){this.userName=e,this.name=t,this.avatarUrl=r}}class on{constructor(e,t=""){this.profile=e,this.errorMessage=t}}const ln=Vr.GetMediator();function cn(){var e,t,r,a,s;const l=null!=(e=Tt().get(gr.ERROR))?e:"",[i,c]=Rt(new on(new sn(null==(t=Gr.Profile)?void 0:t.userName,null==(a=null==(r=Gr.Profile)?void 0:r.fullName)?void 0:a.name,null==(s=Gr.Profile)?void 0:s.avatarUrl),l)),u=(0,o.s0)(),m=new an,[p,d]=Nt((()=>nn(this,null,(function*(){if(f()&&!m.pwd.validation()||!f()&&!m.validation())return;const e=i.profile;let t=m.userName.getValue();f()&&e&&(t=e.userName||"");const r=new $r(t,m.pwd.getValue());yield ln.send(r).then((()=>nn(this,null,(function*(){return yield Vr.getServiceBus().publishEvent(new Hr)})))).catch((e=>{c((t=>rn(tn({},t),{errorMessage:fr.createFromPromiseCatch(e).message})))}))}))),[u]),g=e=>{"Enter"===e.key&&d()},E=()=>{c((e=>rn(tn({},e),{profile:void 0})))},f=()=>{var e;return!!(null==(e=i.profile)?void 0:e.userName)};return m.userName.props.onKeyPress=g,m.pwd.props.onKeyPress=g,m.setDisabled(p),n.createElement(dt.Z,{component:"main",maxWidth:"xs"},n.createElement(fe.Z,{sx:e=>({marginTop:e.spacing(3),marginBottom:e.spacing(3),padding:e.spacing(2),backgroundColor:"var(--EAS-BACKGROUND-COLOR-PAPER-INNER)"})},n.createElement(y.Z,{component:"div",sx:{marginTop:e=>e.spacing(4),display:"flex",flexDirection:"column",alignItems:"center"}},!f()&&n.createElement(Be.Z,{component:"h1",variant:"h5"},"Вход"),n.createElement(Ae,{message:i.errorMessage}),n.createElement(y.Z,{component:"div",sx:{width:"100%",marginTop:e=>e.spacing(1)}},f()&&(()=>{const e=i.profile;if(e)return n.createElement(n.Fragment,null,n.createElement("div",null,(()=>{const e=i.profile;if(!e)return;const t={width:e=>e.spacing(12),height:e=>e.spacing(12),margin:"0 auto",marginBottom:e=>e.spacing(2)};return e.avatarUrl?n.createElement(mt.Z,{sx:t,alt:e.name,src:e.avatarUrl}):e.name?n.createElement(mt.Z,{sx:tn(tn({},t),{color:e=>e.palette.getContrastText(ht.Z[500]),backgroundColor:ht.Z[500]})},e.name):n.createElement(ct.Z,{sx:t})})()),n.createElement(y.Z,{component:"div",sx:{textAlign:"center",fontSize:"calc(12px + 0.8vw)",marginBottom:e=>e.spacing(2)}},"Здравствуйте, ",e.name),n.createElement(y.Z,{component:"div",sx:{textAlign:"center"}},n.createElement(pt.Z,{component:"button",disabled:p,onClick:E},"Другой пользователь")))})(),!f()&&n.createElement(Fe,null,m.userName.view()),n.createElement(Fe,null,m.pwd.view()),n.createElement(Fe,null,n.createElement(O.Z,{variant:"contained",color:"primary",sx:{margin:e=>e.spacing(3,1,2)},disabled:p,onClick:d,fullWidth:!0},"Войти"))),f()&&n.createElement(y.Z,{component:"div",sx:{textAlign:"right",width:"100%"}},n.createElement(O.Z,{variant:"text",sx:{fontSize:"var(--SMF-FONT-SIZE-SMALL-TEXT)",marginRight:e=>e.spacing(1)},disabled:p,endIcon:n.createElement(ut.Z,null),onClick:()=>{Gr.Profile=void 0,E()}},"Выйти")),n.createElement(y.Z,{component:"div",sx:{width:"100%",marginTop:e=>e.spacing(3)}},n.createElement(we,null)),n.createElement(Fe,null,n.createElement(O.Z,{variant:"outlined",color:"primary",sx:{margin:e=>e.spacing(1,1,2)},disabled:p,onClick:()=>{u(h.REGISTRATION)},fullWidth:!0},"Регистрация")))))}function un(){return n.createElement(n.Fragment,null,n.createElement(ye,null,n.createElement(cn,null)))}var mn=r(5295),pn=r(8515),dn=r(9161),hn=r(5725),gn=r(3329);const En=class{constructor(e){this.errorMessage=e,this.eventName=En.EVENT_NAME}};let fn=En;fn.EVENT_NAME="ErrorRegisterIntegrationEvent";const vn=class{constructor(){this.eventName=vn.EVENT_NAME}};vn.EVENT_NAME="UserRegisteredIntegrationEvent";const yn=class{constructor(){this.eventName=yn.EVENT_NAME}};let bn=yn;function wn(){const e=(0,o.s0)();return n.createElement(dt.Z,{component:"main",maxWidth:"lg"},n.createElement(fe.Z,{sx:e=>({marginTop:e.spacing(3),marginBottom:e.spacing(3),padding:e.spacing(2),backgroundColor:"var(--EAS-BACKGROUND-COLOR-PAPER-INNER)"})},n.createElement(y.Z,{component:"div",sx:{marginTop:e=>e.spacing(4),display:"flex",flexDirection:"column",alignItems:"flex-end",fontSize:"calc(var(--EAS-FONT-SIZE-BASE) + 0.2vw)"}},n.createElement(pt.Z,{component:"button",onClick:()=>{return e=this,null,t=function*(){yield Vr.getServiceBus().publishEvent(new bn)},new Promise(((r,n)=>{var a=e=>{try{o(t.next(e))}catch(e){n(e)}},s=e=>{try{o(t.throw(e))}catch(e){n(e)}},o=e=>e.done?r(e.value):Promise.resolve(e.value).then(a,s);o((t=t.apply(e,null)).next())}));var e,t}},"Я уже зарегистрирован")),n.createElement(y.Z,{component:"div",sx:{display:"flex",flexDirection:"column",alignItems:"center"}},n.createElement(Be.Z,{component:"h1",variant:"h5"},"Регистрация"),n.createElement(y.Z,{component:"div",sx:{width:"100%",marginTop:e=>e.spacing(2),marginBottom:e=>e.spacing(4)}},n.createElement(we,null)),n.createElement(hn.ZP,{container:!0,spacing:8,justifyContent:"center"},n.createElement(hn.ZP,{item:!0,key:"regByCode",xs:12,sm:6,md:6,lg:5,xl:5},n.createElement(mn.Z,null,n.createElement(pn.Z,{title:"У меня есть КОД",titleTypographyProps:{align:"center"},action:n.createElement(gn.Z,null),sx:{backgroundColor:e=>e.palette.primary.dark,color:e=>e.palette.primary.contrastText}}),n.createElement(dn.Z,{sx:{backgroundColor:e=>e.palette.primary.light}},n.createElement(O.Z,{variant:"contained",color:"success",sx:{margin:e=>e.spacing(3,1,2)},fullWidth:!0,onClick:()=>{e(h.JOIN_TO_ORGANIZATION)}},"Хочу присоединиться к организации")))),n.createElement(hn.ZP,{item:!0,key:"regAsOgr",xs:12,sm:6,md:6,lg:5,xl:5},n.createElement(mn.Z,null,n.createElement(pn.Z,{title:"Новый пользователь",titleTypographyProps:{align:"center"},sx:{backgroundColor:"#b96d20"}}),n.createElement(dn.Z,{sx:{backgroundColor:"#e3e29b"}},n.createElement(O.Z,{variant:"contained",color:"success",sx:{margin:e=>e.spacing(3,1,2)},fullWidth:!0,onClick:()=>{e(h.USER_REGISTRATION)}},"Хочу управлять сотрудниками"))))))))}function On(){return n.createElement(n.Fragment,null,n.createElement(ye,null,n.createElement(wn,null)))}bn.EVENT_NAME="AlreadyRegisteredIntegrationEvent";class xn{constructor(e,t){this.userName=e,this.password=t,this.registrationClient=Vr.getRegistrationClient()}execute(){return this.registrationClient.registrationUser(this.userName,this.password)}}var Pn=Object.defineProperty,Nn=Object.defineProperties,Cn=Object.getOwnPropertyDescriptors,Rn=Object.getOwnPropertySymbols,Tn=Object.prototype.hasOwnProperty,Sn=Object.prototype.propertyIsEnumerable,Zn=(e,t,r)=>t in e?Pn(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,In=(e,t)=>{for(var r in t||(t={}))Tn.call(t,r)&&Zn(e,r,t[r]);if(Rn)for(var r of Rn(t))Sn.call(t,r)&&Zn(e,r,t[r]);return e},An=(e,t)=>Nn(e,Cn(t)),kn=(e,t,r)=>new Promise(((n,a)=>{var s=e=>{try{l(r.next(e))}catch(e){a(e)}},o=e=>{try{l(r.throw(e))}catch(e){a(e)}},l=e=>e.done?n(e.value):Promise.resolve(e.value).then(s,o);l((r=r.apply(e,t)).next())}));class Mn extends gt{constructor(){super(...arguments),this.userName=new $t({validations:[new pr,new or,new ir(50),new dr(3)],title:"Ваш email для входа в систему",isAutofocus:!0}),this.pwd=new Jt({validations:[new or,new ir(24),new dr(5)],title:"Придумай пароль",autocomplete:"new-password"})}}class Dn{constructor(e=""){this.errorMessage=e}}class Vn{constructor(e){this.email=e}}const jn="USER_REG_STATE_FORM",_n=Vr.GetMediator();function Fn(){const[e,t]=Rt(new Dn),r=new Mn;(0,n.useEffect)((()=>{const e=Fr.Get(jn);e&&(r.userName.setNewInitialValue(e.email),t((e=>An(In({},e),{errorMessage:""}))))}),[]);const[a,o]=Nt((()=>kn(this,null,(function*(){if(!r.validation())return;const e=r.userName.getValue(),n=r.pwd.getValue(),a=new xn(e,n);yield _n.send(a).then((()=>kn(this,null,(function*(){const t=new $r(e,n);yield t.execute().then((()=>kn(this,null,(function*(){Fr.Remove(jn),yield Vr.getServiceBus().publishEvent(new Hr)})))).catch((e=>kn(this,null,(function*(){const t=fr.createFromPromiseCatch(e).message;yield Vr.getServiceBus().publishEvent(new fn(t))}))))})))).catch((e=>{t((t=>An(In({},t),{errorMessage:fr.createFromPromiseCatch(e).message})))}))}))),[]),l=()=>a;return r.setDisabled(l()),r.pwd.props.onKeyPress=e=>{"Enter"===e.key&&o()},n.createElement(dt.Z,{component:"main",maxWidth:"sm"},n.createElement(fe.Z,{sx:{marginTop:e=>e.spacing(4),display:"flex",flexDirection:"column",alignItems:"center",padding:e=>e.spacing(2),margin:e=>e.spacing(2),borderRadius:e=>e.spacing(2),cursor:"pointer",textAlign:"center"}},n.createElement(y.Z,{component:"div",sx:{display:"flex",flexDirection:"column",alignItems:"center"}},n.createElement(ze,null,"Зарегистрироваться"),n.createElement(y.Z,{component:"div",sx:{width:"100%",marginTop:e=>e.spacing(2),marginBottom:e=>e.spacing(4)}},n.createElement(we,null)),n.createElement(n.Fragment,null,n.createElement(Ae,{message:e.errorMessage}),n.createElement(Fe,null,r.userName.view()),n.createElement(Fe,null,r.pwd.view()),n.createElement(Fe,null,n.createElement(O.Z,{variant:"contained",color:"primary",sx:{margin:e=>e.spacing(3,1,2)},disabled:l(),onClick:o,fullWidth:!0},"Продолжить")),n.createElement(y.Z,{component:"div",sx:{width:"100%",fontSize:"var(--EAS-FONT-SIZE-MD-TEXT)"}},'Нажимая "Продолжить", Вы соглашаетесь с ',n.createElement(s.rU,{to:`${h.AGREEMENT_USER}?${new URLSearchParams({[gr.BACK]:h.USER_REGISTRATION}).toString()}`,onClick:()=>{Fr.Push(jn,new Vn(r.userName.getValue()),300)}},"Соглашение на обработку персональных данных"))),n.createElement(y.Z,{component:"div",sx:{marginTop:e=>e.spacing(4),fontSize:"var(--EAS-FONT-SIZE-MD-TEXT)",textAlign:"center"}},"Уже зарегистрировались? ",n.createElement(pt.Z,{component:"button",onClick:()=>kn(this,null,(function*(){Fr.Remove(jn),yield Vr.getServiceBus().publishEvent(new bn)}))},"Войти")))))}function Bn(){return n.createElement(n.Fragment,null,n.createElement(ye,null,n.createElement(Fn,null)))}function zn(){var e;const t=Tt();return n.createElement(dt.Z,{component:"main",maxWidth:"md",sx:{marginBottom:e=>e.spacing(4)}},n.createElement(fe.Z,{sx:{marginTop:e=>e.spacing(4),display:"flex",flexDirection:"column",padding:e=>e.spacing(4),fontSize:"calc(14px + 0.2vw)"}},n.createElement("div",{className:"form-row"},n.createElement(s.rU,{to:null!=(e=t.get(gr.BACK))?e:""},"Назад")),n.createElement(y.Z,{component:"div",sx:{textAlign:"center",color:"#00897b",fontSize:"calc(14px + 1vw)",marginBottom:e=>e.spacing(1)}},"Соглашение на обработку персональных данных"),n.createElement("hr",null),n.createElement("p",{className:"justify"},"В соответствии с требованиями Федерального закона от 27.07.2006 г. № 152-ФЗ «О персональных данных» я выражаю согласие на обработку своих персональных данных администрацией ресурса eas.bacup.ru без оговорок и ограничений, совершение с моими персональными данными действий, предусмотренных п.3 ч.1 ст.3 Федерального закона от 27.07.2006 г. №152-ФЗ «О персональных данных», и подтверждаю, что давая такое согласие, действую свободно, по своей воле и в своих интересах."),n.createElement("p",{className:"justify"},"Согласие на обработку персональных данных даётся мной в целях получения услуг, оказываемых ресурсом eas.bacup.ru."),n.createElement("p",{className:"justify"},"Перечень персональных данных, на обработку которых предоставляется согласие:"),n.createElement("ul",{className:"justify"},n.createElement("li",null,"фамилия"),n.createElement("li",null,"имя"),n.createElement("li",null,"отчество"),n.createElement("li",null,"место пребывания (город, область)"),n.createElement("li",null,"номера телефонов"),n.createElement("li",null,"адреса электронной почты (E-mail)"),n.createElement("li",null,"а также иные полученные от меня персональные данные. ")),n.createElement("p",{className:"justify"},"Я выражаю свое согласие на осуществление со всеми указанными персональными данными следующих действий:"),n.createElement("ul",{className:"justify"},n.createElement("li",null,"сбор"),n.createElement("li",null,"систематизация"),n.createElement("li",null,"накопление"),n.createElement("li",null,"хранение"),n.createElement("li",null,"уточнение (обновление или изменение)"),n.createElement("li",null,"использование"),n.createElement("li",null,"обезличивание"),n.createElement("li",null,"блокирование"),n.createElement("li",null,"уничтожение"),n.createElement("li",null,"а также осуществление любых иных действий с персональными данными в соответствии с действующим законодательством. ")),n.createElement("p",{className:"justify"},"Обработка данных может осуществляться как с использованием средств автоматизации, так и без их использования (при неавтоматической обработке). При обработке персональных данных администрация ресурса eas.bacup.ru не ограничено в применении способов их обработки."),n.createElement("p",{className:"justify"},"Настоящим я признаю и подтверждаю, что в случае необходимости администрация ресурса eas.bacup.ru является правообладателем всех фото, видеоматериалов и текстовых материалов полученных в процессе моех действий на ресурсе eas.bacup.ru и вправе предоставлять мои персональные данные третьим лицам исключительно в целях оказания услуг технической поддержки, а также (в обезличенном виде) в статистических, маркетинговых и иных научных целях. Такие третьи лица имеют право на обработку персональных данных на основании настоящего согласия."),n.createElement("hr",null),n.createElement("p",{className:"justify"},"Администрация ресурса имеет право вносить изменения в настоящее Соглашение. При внесении изменений в актуальной редакции указывается дата последнего обновления. Новая редакция Соглашения вступает в силу с момента ее размещения, если иное не предусмотрено новой редакцией Соглашения."),n.createElement("p",{className:"justify"},"Дата последнего обновления текста Соглашения: 01.12.2022.")))}function Un(){return n.createElement(n.Fragment,null,n.createElement(ye,null,n.createElement(zn,null)))}class Ln{constructor(e){this.userName=e}}class Gn{constructor(e){this.invitationCode=e,this.invitationsClient=Vr.getInvitationsClient()}execute(){return this.invitationsClient.checkInvitationCode(this.invitationCode).then((e=>new Ln(e.userName)))}}class $n{constructor(e,t,r){this.invitationCode=e,this.userName=t,this.password=r,this.registrationClient=Vr.getRegistrationClient()}execute(){return this.registrationClient.registrationUserByCode(this.invitationCode,this.userName,this.password)}}var Wn=Object.defineProperty,Hn=Object.defineProperties,Kn=Object.getOwnPropertyDescriptors,qn=Object.getOwnPropertySymbols,Jn=Object.prototype.hasOwnProperty,Yn=Object.prototype.propertyIsEnumerable,Xn=(e,t,r)=>t in e?Wn(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,Qn=(e,t)=>{for(var r in t||(t={}))Jn.call(t,r)&&Xn(e,r,t[r]);if(qn)for(var r of qn(t))Yn.call(t,r)&&Xn(e,r,t[r]);return e},ea=(e,t)=>Hn(e,Kn(t)),ta=(e,t,r)=>new Promise(((n,a)=>{var s=e=>{try{l(r.next(e))}catch(e){a(e)}},o=e=>{try{l(r.throw(e))}catch(e){a(e)}},l=e=>e.done?n(e.value):Promise.resolve(e.value).then(s,o);l((r=r.apply(e,t)).next())}));class ra extends gt{constructor(){super(...arguments),this.invitationCode=new $t({validations:[new or,new ir(6)],title:"Код из компании",isAutofocus:!0}),this.userName=new $t({validations:[],title:"Ваш логин для входа в систему",allwaysDisabled:!0}),this.pwd=new Jt({validations:[new or,new ir(24),new dr(5)],title:"Придумай пароль",autocomplete:"new-password"})}}class na{constructor(e="",t=!1){this.errorMessage=e,this.isValidCode=t}}class aa{constructor(e,t){this.code=e,this.email=t}}const sa="JOIN_STATE_FORM",oa=Vr.GetMediator();function la(){const[e,t]=Rt(new na),r=(0,o.s0)(),a=new ra;(0,n.useEffect)((()=>{const e=Fr.Get(sa);e&&(a.invitationCode.setValue(e.code),a.userName.setNewInitialValue(e.email),t((e=>ea(Qn({},e),{errorMessage:"",isValidCode:!0}))))}),[]);const[l,i]=Nt((()=>ta(this,null,(function*(){if(!a.validation())return;const e=a.userName.getValue(),r=a.pwd.getValue(),n=new $n(a.invitationCode.getValue(),e,r);yield oa.send(n).then((()=>{new $r(e,r).execute().then((()=>ta(this,null,(function*(){Fr.Remove(sa),yield Vr.getServiceBus().publishEvent(new Hr)})))).catch((e=>ta(this,null,(function*(){const t=fr.createFromPromiseCatch(e).message;yield Vr.getServiceBus().publishEvent(new fn(t))}))))})).catch((e=>{t((t=>ea(Qn({},t),{errorMessage:fr.createFromPromiseCatch(e).message})))}))}))),[r]),c=()=>l||u,[u,m]=Nt((()=>ta(this,null,(function*(){if(!a.invitationCode.validation())return;Fr.Remove(sa);const e=a.invitationCode.getValue(),r=new Gn(e);yield oa.send(r).then((r=>{a.userName.setNewInitialValue(r.userName),Fr.Push(sa,new aa(e,r.userName),300),t((e=>ea(Qn({},e),{errorMessage:"",isValidCode:!0})))})).catch((e=>{t((t=>ea(Qn({},t),{errorMessage:fr.createFromPromiseCatch(e).message,isValidCode:!1})))}))}))),[]);return a.setDisabled(c()),a.invitationCode.props.onKeyPress=e=>{"Enter"===e.key&&m()},a.pwd.props.onKeyPress=e=>{"Enter"===e.key&&i()},a.invitationCode.props.allwaysDisabled=!e.isValidCode,a.invitationCode.props.disabled=e.isValidCode,n.createElement(dt.Z,{component:"main",maxWidth:"sm"},n.createElement(fe.Z,{sx:{marginTop:e=>e.spacing(4),display:"flex",flexDirection:"column",alignItems:"center",padding:e=>e.spacing(2),margin:e=>e.spacing(2),borderRadius:e=>e.spacing(2),cursor:"pointer",textAlign:"center"}},n.createElement(y.Z,{component:"div",sx:{width:"100%",fontSize:"calc(14px + 1vw)",marginBottom:e=>e.spacing(1)}},"Присоединиться к организации",n.createElement(we,null)),e.isValidCode?n.createElement(n.Fragment,null,n.createElement(Ae,{message:e.errorMessage}),n.createElement(Fe,null,a.invitationCode.view()),n.createElement(Fe,null,a.userName.view()),n.createElement(Fe,null,a.pwd.view()),n.createElement(Fe,null,n.createElement(O.Z,{variant:"contained",color:"primary",sx:{margin:e=>e.spacing(3,1,2)},disabled:c(),onClick:i,fullWidth:!0},"Продолжить")),n.createElement(y.Z,{component:"div",sx:{width:"100%",fontSize:"var(--EAS-FONT-SIZE-MD-TEXT)"}},'Нажимая "Продолжить", Вы соглашаетесь с ',n.createElement(s.rU,{to:`${h.AGREEMENT_USER}?${new URLSearchParams({[gr.BACK]:h.JOIN_TO_ORGANIZATION}).toString()}`},"Соглашение на обработку персональных данных"))):n.createElement(n.Fragment,null,n.createElement(Ae,{message:e.errorMessage}),n.createElement(Fe,null,a.invitationCode.view()),n.createElement(Fe,null,n.createElement(O.Z,{variant:"contained",color:"primary",sx:{margin:e=>e.spacing(3,1,2)},disabled:c(),onClick:m,fullWidth:!0},"Продолжить"))),n.createElement(y.Z,{component:"div",sx:{marginTop:e=>e.spacing(4),fontSize:"var(--EAS-FONT-SIZE-MD-TEXT)",textAlign:"center"}},"Уже зарегистрировались? ",n.createElement(pt.Z,{component:"button",onClick:()=>ta(this,null,(function*(){Fr.Remove(sa),yield Vr.getServiceBus().publishEvent(new bn)}))},"Войти"))))}function ia(){return n.createElement(n.Fragment,null,n.createElement(ye,null,n.createElement(la,null)))}var ca=r(8585);const ua=class extends p{};let ma=ua;ma.EMPLOYEES=ua.ROOT_APP+"/employees",ma.CREATE_EMPLOYEE=ua.ROOT_APP+"/employees/add",ma.EDIT_EMPLOYEE=ua.ROOT_APP+"/employees/:id/edit";class pa{static getMenuItems(){return[new be(ma.EMPLOYEES,"Сотрудники")]}}class da{static getMenuItems(){return[new be(v.ORGANIZATIONS,"Организации")]}}const ha=new class{constructor(){this.ogranizations=void 0,this.selectedOgranization=void 0,(0,jr.ky)(this)}get hasOgranizations(){return!!this.ogranizations&&this.ogranizations.length>0}};class ga{logout(){return Tr.createHttpClientWithAuth().get("/api/auth/logout")}}class Ea{constructor(){this.identityClient=class{static getIdentityClient(){return new ga}}.getIdentityClient()}execute(){return this.identityClient.logout().then((e=>{e&&m.clear()})).catch((()=>{m.clear()}))}}const fa=new class{constructor(){this.avatarObjectURL=void 0,(0,jr.rC)(this)}};var va=r(4347),ya=r(3720),ba=r(4386),wa=r(4563),Oa=r(4169);function xa(e){if(e&&e.surname){const t=e.surname;let r="";return e.name&&e.name.length>1&&(r=e.name.charAt(0).toUpperCase()),e.patronymic&&e.patronymic.length>1?`${t} ${r}. ${e.patronymic.charAt(0).toUpperCase()}.`:`${t} ${r}.`}return""}function Pa(){return n.createElement(s.rU,{to:E.ROOT,style:{textDecoration:"none"}},n.createElement(Be.Z,{variant:"h6",sx:{paddingRight:e=>e.spacing(1),paddingLeft:e=>e.spacing(1),minHeight:"64px",display:"inline-flex",alignItems:"center",backgroundColor:"rgba(120, 220, 220, 255) !important",boxShadow:"0 2px 8px rgb(0 0 0 / 40%), 0 0 20px rgb(0 0 0 / 10%) inset",WebkitBoxShadow:"0 2px 8px rgb(0 0 0 / 40%), 0 0 20px rgb(0 0 0 / 10%) inset",MozBoxShadow:"0 2px 8px rgb(0 0 0 / 40%), 0 0 20px rgb(0 0 0 / 10%) inset"}},"EAS"))}function Na(e){const[t,r]=n.useState(null),a=(0,o.s0)(),[l,i]=Rt({isLoading:!1,errorMessage:""}),c=Ct(),u=(0,n.useCallback)((()=>{return t=this,null,r=function*(){l.isLoading||(i({isLoading:!0,errorMessage:""}),yield e.actionLogout().then((()=>{i({isLoading:!1,errorMessage:""}),a(E.LOGIN)})).catch((e=>{i({isLoading:!1,errorMessage:"Выход не осуществлён: "+e.message})})))},new Promise(((e,n)=>{var a=e=>{try{o(r.next(e))}catch(e){n(e)}},s=e=>{try{o(r.throw(e))}catch(e){n(e)}},o=t=>t.done?e(t.value):Promise.resolve(t.value).then(a,s);o((r=r.apply(t,null)).next())}));var t,r}),[l,a]),m=()=>{r(null)};return n.createElement(n.Fragment,null,n.createElement(Oe.Z,{sx:{zIndex:e=>e.zIndex.drawer+1,color:"#fff"},open:l.isLoading},n.createElement(pe,{text:"Осуществляем выход из системы. Пожалуйста, ожидайте..."})),n.createElement(Ee,{message:l.errorMessage,handleCloseMessage:()=>{i({isLoading:!1,errorMessage:""})}}),n.createElement(ya.Z,{position:"static",sx:{backgroundColor:"rgba(50,150,100,1)"}},n.createElement(ba.Z,{sx:{paddingLeft:"0!important"}},n.createElement(Pa,null),e.menuItems.map((t=>n.createElement(va.Z,{key:t.to,selected:("/"===e.rootApp?`${e.rootApp}${c[1]}`:`${e.rootApp}${c[2]}`)===t.to,sx:{minHeight:"64px !important"},classes:{selected:"menu-item-selected",root:"menu-item-root"},component:s.rU,to:t.to},t.text))),n.createElement(y.Z,{component:"div",sx:{margin:"0 0 0 auto"}},n.createElement(Ht.Z,{sx:{"&:hover":{backgroundColor:"var(--EAS-BACKGROUND-COLOR-SELECTED) !important",boxShadow:"0 2px 8px rgb(0 0 0 / 40%), 0 0 20px rgb(0 0 0 / 15%) inset",WebkitBoxShadow:"0 2px 8px rgb(0 0 0 / 40%), 0 0 20px rgb(0 0 0 / 15%) inset",MozBoxShadow:"0 2px 8px rgb(0 0 0 / 40%), 0 0 20px rgb(0 0 0 / 15%) inset"}},size:"medium","aria-controls":"menu-account-appbar","aria-haspopup":"true",onClick:e=>{r(e.currentTarget)},color:"inherit",disabled:l.isLoading},(()=>{if(e.avatarUrl)return n.createElement(mt.Z,{alt:xa(e.userFullName),src:e.avatarUrl});const t=function(e){if(e&&e.surname&&e.surname.length>0){let t=e.surname.charAt(0);return e.name&&e.name.length>0&&(t+=e.name.charAt(0)),t=t.toUpperCase(),t}}(e.userFullName);return t?n.createElement(mt.Z,{sx:{color:e=>e.palette.getContrastText(ht.Z[500]),backgroundColor:ht.Z[500]}},t):n.createElement(ct.Z,null)})(),n.createElement(y.Z,{component:"div",sx:{marginLeft:e=>e.spacing(.5),textAlign:"left"}},n.createElement(y.Z,{component:"div",sx:{marginRight:e=>e.spacing(1),fontSize:"var(--EAS-FONT-SIZE-MD-TEXT)"}},xa(e.userFullName)))),n.createElement(wa.Z,{title:"Выйти"},n.createElement(Ht.Z,{sx:{"&:hover":{backgroundColor:"var(--EAS-BACKGROUND-COLOR-SELECTED) !important",boxShadow:"0 2px 8px rgb(0 0 0 / 40%), 0 0 20px rgb(0 0 0 / 15%) inset",WebkitBoxShadow:"0 2px 8px rgb(0 0 0 / 40%), 0 0 20px rgb(0 0 0 / 15%) inset",MozBoxShadow:"0 2px 8px rgb(0 0 0 / 40%), 0 0 20px rgb(0 0 0 / 15%) inset"}},"aria-label":"exit",onClick:u,disabled:l.isLoading,color:"inherit"},n.createElement(ut.Z,null))),n.createElement(Oa.Z,{id:"menu-account-appbar",anchorEl:t,anchorOrigin:{vertical:"top",horizontal:"left"},keepMounted:!0,transformOrigin:{vertical:"top",horizontal:"right"},open:Boolean(t),onClose:m},n.createElement(va.Z,{onClick:()=>{m(),u()}},"Выход"))))))}const Ca={boxSelectedOrgainzation:{backgroundColor:"mediumpurple",textAlign:"right",fontSize:"var(--EAS-FONT-SIZE-LG-TEXT)",color:"white",padding:e=>e.spacing(.5)},boxUnSelectedOrgainzation:{backgroundColor:"mediumpurple",textAlign:"center",fontSize:"var(--EAS-FONT-SIZE-LG-TEXT)",color:"white",padding:e=>e.spacing(.5)}},Ra=(0,ca.Pi)((()=>{const e=()=>!!ha.selectedOgranization;return n.createElement(y.Z,{component:"div",sx:e()?Ca.boxSelectedOrgainzation:Ca.boxUnSelectedOrgainzation},e()?n.createElement(n.Fragment,null,"Организация: ",n.createElement(y.Z,{component:"b"},null==(t=ha.selectedOgranization)?void 0:t.name)):(null==(r=ha.ogranizations)?void 0:r.length)?n.createElement(n.Fragment,null,n.createElement(y.Z,{component:"b"},"Выберите организацию")):n.createElement(n.Fragment,null,n.createElement(y.Z,{component:"b"},"Добавь организацию. Начни работать")));var t,r}));var Ta=Object.defineProperty,Sa=Object.getOwnPropertySymbols,Za=Object.prototype.hasOwnProperty,Ia=Object.prototype.propertyIsEnumerable,Aa=(e,t,r)=>t in e?Ta(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,ka=(e,t)=>{for(var r in t||(t={}))Za.call(t,r)&&Aa(e,r,t[r]);if(Sa)for(var r of Sa(t))Ia.call(t,r)&&Aa(e,r,t[r]);return e};const Ma=E.ROOT_APP;function Da(e){const t=Ct(),r=()=>{const e=[...da.getMenuItems()];return ha.selectedOgranization?[...e,...pa.getMenuItems()]:e},a=(0,ca.Pi)((()=>{const e=Gr.Profile;return n.createElement(Na,{menuItems:r(),rootApp:`${Ma}/`,userFullName:null==e?void 0:e.fullName,avatarUrl:fa.avatarObjectURL,actionLogout:()=>(new Ea).execute()})})),s=()=>{return e=this,null,t=function*(){var e,t;(null==(e=Gr.Profile)?void 0:e.avatarUrl)&&(yield fetch(null==(t=Gr.Profile)?void 0:t.avatarUrl).then((e=>e.blob())).then((e=>{const t=new FileReader;t.onloadend=()=>{t.result&&(fa.avatarObjectURL=t.result)},t.readAsDataURL(e)})).catch((e=>console.log("Невозможно загрузить аватарку -> "+e))))},new Promise(((r,n)=>{var a=e=>{try{o(t.next(e))}catch(e){n(e)}},s=e=>{try{o(t.throw(e))}catch(e){n(e)}},o=e=>e.done?r(e.value):Promise.resolve(e.value).then(a,s);o((t=t.apply(e,null)).next())}));var e,t};return(0,n.useEffect)((()=>{s()}),[]),n.createElement(y.Z,{component:"div",sx:ka({},!t[Ma?2:1]&&{backgroundImage:`url("${Ma}/assets/images/layout/sky.JPG");`,backgroundPosition:"center",backgroundSize:"cover",backgroundRepeat:"no-repeat",width:"100%",height:"100vh"})},n.createElement(Ra,null),n.createElement(a,null),n.createElement(y.Z,{component:"div"},e.children))}function Va(){const e=Tt();return n.createElement(n.Fragment,null,n.createElement(y.Z,{component:"div",className:"row-center",sx:{fontSize:"calc(12px + 10vw)",color:"indianred"}},"403"),n.createElement(y.Z,{component:"div",className:"row-center",sx:{fontSize:"calc(8px + 3vw)",color:"cadetblue"}},"Доступ к ресурсу запрещён."),n.createElement(y.Z,{component:"div",className:"row-center",sx:{fontSize:"calc(8px + 1vw)",paddingTop:e=>e.spacing(2)}},(()=>{const t=e.get(gr.FORBIDDEN_RESOURCE);return t?`Ресурс: ${t}`:""})()))}function ja(){return n.createElement(n.Fragment,null,n.createElement(ye,null,n.createElement(Va,null)))}function _a(){const e=(0,o.s0)();return n.createElement(n.Fragment,null,n.createElement(y.Z,{component:"div",className:"row-center",sx:{fontSize:"10vw",color:"indianred"}},"404"),n.createElement(y.Z,{component:"div",className:"row-center",sx:{fontSize:"3vw",color:"cadetblue"}},"Страница не найдена"),n.createElement(y.Z,{component:"div",className:"row-center",sx:{marginTop:e=>e.spacing(4),marginBottom:e=>e.spacing(2)}},n.createElement(L,{sx:{fontSize:"calc(12px + 0.5vw)"},onClick:()=>{e(E.ROOT)}},"На главную страницу")))}function Fa(){return n.createElement(n.Fragment,null,n.createElement(ye,null,n.createElement(_a,null)))}function Ba(){const e=Tt(),t=(0,o.s0)(),r={fontSize:"calc(3px + 3vw)",color:"lightcoral"};return n.createElement(n.Fragment,null,n.createElement(y.Z,{component:"div",className:"row-center",sx:r},"Нет связи с сервером."),n.createElement(y.Z,{component:"div",className:"row-center",sx:r},"Пожалуйста, обновите страницу позже..."),n.createElement(y.Z,{component:"div",className:"row-center",sx:{marginTop:e=>e.spacing(4),marginBottom:e=>e.spacing(2)}},n.createElement(Q,{sx:{fontSize:"calc(12px + 0.5vw)"},onClick:()=>{const r=e.get(gr.TARGET);t(r||E.ROOT)}},"Обновить страницу")))}function za(){return n.createElement(n.Fragment,null,n.createElement(ye,null,n.createElement(Ba,null)))}var Ua=r(9330),La=r(2643),Ga=r(7797);class $a{constructor(e,t,r){this.id=e,this.name=t,this.createDate=r}}const Wa=class{createOrganization(e){const t=`${Wa.baseUrl}/create`;return Tr.createHttpClientWithAuth().post(t,e)}getOrganizations(){const e=Wa.baseUrl;return Tr.createHttpClientWithAuth().get(e)}};let Ha=Wa;Ha.baseUrl="/api/organizations";const Ka=class{static getOrganizationsClient(){return new Ha}static getServiceBus(){return Ka.serviceBus}static GetMediator(){return Ka.mediator}};let qa=Ka;qa.serviceBus=new xr,qa.mediator=new br;class Ja{constructor(){this.organizationsClient=qa.getOrganizationsClient()}execute(){return this.organizationsClient.getOrganizations().then((e=>e.organizations.map((e=>new $a(e.id,e.name,e.createAt)))))}}const Ya=class{constructor(e){this.organizationId=e,this.eventName=Ya.EVENT_NAME}};let Xa=Ya;Xa.EVENT_NAME="SelectedOrganizationChangedIntegrationEvent";var Qa=Object.defineProperty,es=Object.defineProperties,ts=Object.getOwnPropertyDescriptors,rs=Object.getOwnPropertySymbols,ns=Object.prototype.hasOwnProperty,as=Object.prototype.propertyIsEnumerable,ss=(e,t,r)=>t in e?Qa(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,os=(e,t)=>{for(var r in t||(t={}))ns.call(t,r)&&ss(e,r,t[r]);if(rs)for(var r of rs(t))as.call(t,r)&&ss(e,r,t[r]);return e},ls=(e,t)=>es(e,ts(t)),is=(e,t,r)=>new Promise(((n,a)=>{var s=e=>{try{l(r.next(e))}catch(e){a(e)}},o=e=>{try{l(r.throw(e))}catch(e){a(e)}},l=e=>e.done?n(e.value):Promise.resolve(e.value).then(s,o);l((r=r.apply(e,t)).next())}));class cs{constructor(e,t=""){this.orgs=e,this.errorMessage=t}}const us=qa.GetMediator();function ms(){const[e,t]=Rt(new cs),r=(0,o.s0)(),[a,s]=Nt((()=>is(this,null,(function*(){if(ha.ogranizations)return void t((e=>ls(os({},e),{orgs:ha.ogranizations,errorMessage:""})));const e=new Ja;yield us.send(e).then((e=>{t((t=>ls(os({},t),{orgs:e,errorMessage:""}))),ha.ogranizations=e})).catch((e=>{t((t=>ls(os({},t),{errorMessage:fr.createFromPromiseCatch(e).message})))}))}))),[]);n.useEffect((()=>{s()}),[]);const l=e=>is(this,null,(function*(){ha.selectedOgranization=e,yield qa.getServiceBus().publishEvent(new Xa(e.id))}));return n.createElement(hn.ZP,{container:!0,rowSpacing:1,columnSpacing:{xs:1,sm:2,md:3}},n.createElement(xe,{isLoading:a,text:"Загружаем список организаций. Пожалуйста, ожидайте..."}),e.errorMessage&&n.createElement(Ie.Z,{sx:{textAlign:"center",width:"100%"},error:!0},e.errorMessage),n.createElement(hn.ZP,{xs:3,sx:{margin:ha.hasOgranizations?"0":"0 auto"}},n.createElement(mn.Z,{sx:e=>({margin:e.spacing(2),backgroundColor:"aquamarine"})},n.createElement(pn.Z,{avatar:n.createElement(mt.Z,{sx:{backgroundColor:"darkorchid"}},n.createElement(Ua.Z,null)),title:"Новая организация"}),n.createElement(La.Z,null," "),n.createElement(Ga.Z,{onClick:()=>{r(v.CREATE_ORGANIZATION)},sx:e=>({padding:e.spacing(1),backgroundColor:"#e8d2bd",textAlign:"center",":hover":{backgroundColor:"#a2815f",color:"white"},fontSize:"var(--EAS-FONT-SIZE-MD-TEXT)",fontWeight:"bold"})},"Добавить организацию"))),null==(i=e.orgs)?void 0:i.map((e=>{return t=e,n.createElement(hn.ZP,{xs:3},n.createElement(mn.Z,{sx:e=>({margin:e.spacing(2),backgroundColor:"cornsilk"})},n.createElement(pn.Z,{avatar:n.createElement(mt.Z,{sx:{backgroundColor:"cadetblue"}},t.name[0].toUpperCase()),title:t.name,subheader:`от ${xt(t.createDate)}`}),n.createElement(La.Z,null,"Готова к работе"),n.createElement(Ga.Z,{onClick:()=>{l(t)},sx:e=>({padding:e.spacing(1),backgroundColor:"#61998f",textAlign:"center",":hover":{backgroundColor:"#455b55",color:"white"},fontSize:"var(--EAS-FONT-SIZE-MD-TEXT)",fontWeight:"bold"})},"Выбрать организацию")));var t})));var i}function ps(){return n.createElement(n.Fragment,null,n.createElement(ye,null,n.createElement(ms,null)))}class ds{constructor(e){this.name=e}}class hs{constructor(e){this.name=e,this.organizationsClient=qa.getOrganizationsClient()}execute(){const e=new ds(this.name);return this.organizationsClient.createOrganization(e).then((e=>new $a(e.organization.id,e.organization.name,e.organization.createAt)))}}var gs=Object.defineProperty,Es=Object.defineProperties,fs=Object.getOwnPropertyDescriptors,vs=Object.getOwnPropertySymbols,ys=Object.prototype.hasOwnProperty,bs=Object.prototype.propertyIsEnumerable,ws=(e,t,r)=>t in e?gs(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r;class Os{constructor(e=""){this.errorMessage=e}}class xs extends gt{constructor(){super(...arguments),this.name=new $t({validations:[new or,new ir(100)],title:"Наименование",isAutofocus:!0})}}const Ps=qa.GetMediator(),Ns={buttonCancel:{marginRight:e=>e.spacing(2)}};function Cs(){const[e,t]=Rt(new Os),r=(0,o.s0)(),a=new xs,[s,l]=Nt((()=>{return e=this,null,n=function*(){if(!a.validation())return;const e=new hs(a.name.getValue());yield Ps.send(e).then((e=>{ha.ogranizations=(ha.ogranizations||[]).concat(e),r(v.ORGANIZATIONS)})).catch((e=>{t((t=>{return r=((e,t)=>{for(var r in t||(t={}))ys.call(t,r)&&ws(e,r,t[r]);if(vs)for(var r of vs(t))bs.call(t,r)&&ws(e,r,t[r]);return e})({},t),n={errorMessage:fr.createFromPromiseCatch(e).message},Es(r,fs(n));var r,n}))}))},new Promise(((t,r)=>{var a=e=>{try{o(n.next(e))}catch(e){r(e)}},s=e=>{try{o(n.throw(e))}catch(e){r(e)}},o=e=>e.done?t(e.value):Promise.resolve(e.value).then(a,s);o((n=n.apply(e,null)).next())}));var e,n}),[r]);return a.setDisabled(s),n.createElement(dt.Z,{component:"main",maxWidth:"md"},n.createElement(it,null,n.createElement(ze,null,"Регистрация организации"),n.createElement(Ae,{message:e.errorMessage}),n.createElement(Ze,null,n.createElement(Fe,null,a.name.view())),n.createElement(tt,null,n.createElement(ce,{disabled:s,onClick:()=>{r(v.ORGANIZATIONS)},sx:Ns.buttonCancel},"Отмена"),n.createElement(k,{disabled:s,onClick:l},"Зарегистрировать"))))}function Rs(){return n.createElement(n.Fragment,null,n.createElement(ye,null,n.createElement(Cs,null)))}class Ts{constructor(e){this.eventName=Hr.EVENT_NAME,this.navigation=e}Consume(e){return new Promise((e=>{this.navigation(v.ORGANIZATIONS)}))}}class Ss{constructor(e){this.eventName=bn.EVENT_NAME,this.navigation=e}Consume(e){return new Promise((e=>{this.navigation(E.LOGIN)}))}}class Zs{constructor(e){this.eventName=fn.EVENT_NAME,this.navigation=e}Consume(e){return new Promise((t=>{var r;(r=this.navigation,(e,t)=>r({pathname:e,search:`?${new URLSearchParams(t)}`}))(E.LOGIN,{[gr.ERROR]:e.errorMessage})}))}}class Is{constructor(e){this.eventName=Xa.EVENT_NAME,this.navigation=e}Consume(e){return new Promise((e=>{this.navigation(E.ROOT)}))}}const As=new class{constructor(){this.selectedOrganizationId=void 0,(0,jr.ky)(this)}};class ks{constructor(){this.eventName=Xa.EVENT_NAME}Consume(e){return new Promise((t=>{As.selectedOrganizationId=e.organizationId}))}}var Ms,Ds,Vs=r(1216),js=r(3985),_s=r(6011),Fs=r(3694),Bs=r(5558),zs=r(9573),Us=r(1898),Ls=r(6926),Gs=r(124),$s=r(7896),Ws=r(8732),Hs=r(3887);class Ks{constructor(){this.value=""}}(Ds=Ms||(Ms={})).String="text",Ds.Date="date";class qs{constructor(e,t){this.propertyName=e,this.value=t}}class Js{constructor(e,t,r,n,a){this.orderBy=e,this.order=t,this._page=r,this.rowsPerPage=n,this.filters=a}get page(){return this._page+1}set page(e){this._page=e}}function Ys(e){const{propertyName:t,onChangeFilter:r,filteType:a}=e,[s,o]=n.useState(e.value),[l,i]=n.useState(!1),[c,u]=n.useState(null),m=()=>{i(!1),r(t,s)};return n.createElement(n.Fragment,null,n.createElement(wa.Z,{title:"Фильтр"},n.createElement(js.Z,{color:"primary",badgeContent:s?1:0,overlap:"circular"},n.createElement(Ht.Z,{"aria-label":"filter list",onClick:e=>{u(e.currentTarget),i(!l)}},n.createElement(Vs.Z,null)))),n.createElement(ro,{open:l,anchorEl:c,placement:"bottom"},n.createElement(no,null,n.createElement(zt.Z,{value:s,margin:"normal",fullWidth:!0,label:"Значение фильтра",type:a,autoFocus:!0,onChange:e=>{o(e.currentTarget.value)},onKeyPress:e=>{"Enter"===e.key&&m()}}),n.createElement(oo,{variant:"outlined",onClick:()=>{i(!1),o(""),r(t,"")},disabled:!s},"Сбросить"),n.createElement(oo,{variant:"contained",color:"primary",onClick:m},"Применить"))))}function Xs(e){const{columns:t,order:r,orderBy:a,onRequestSort:s,onRequestFilter:o,disabledSort:l,hideFilter:i}=e,c=(e,r)=>{const n=t.find((t=>t.propertyName===e));n&&n.filter&&(n.filter.value=r,o(new qs(n.propertyName,null!=r?r:"")))};return n.createElement(_s.Z,null,n.createElement(Fs.Z,{sx:{height:"46px"}},t.map((e=>{var t,o,u;return n.createElement(lo,{key:e.propertyName,align:null!=(t=e.alignHead)?t:"left",sortDirection:a===e.propertyName&&r},(e=>{var t;return l||null!=(t=e.disibledSort)&&t})(e)?e.description:n.createElement(Bs.Z,{active:a===e.propertyName,direction:a===e.propertyName?r:"asc",onClick:(u=e.propertyName,e=>{s(u)})},e.description,a===e.propertyName?n.createElement(to,null):null),!i&&e.filter&&n.createElement(Ys,{value:e.filter.value,onChangeFilter:c,propertyName:e.propertyName,filteType:null!=(o=e.filterType)?o:Ms.String}))}))))}const Qs=(0,x.ZP)(fe.Z)((({theme:e})=>({width:"100%",marginBottom:e.spacing(2),borderRadius:e.spacing(1)}))),eo=(0,x.ZP)(zs.Z)((({theme:e})=>({minWidth:500,borderRadius:e.spacing(1),backgroundColor:"seagreen",marginLeft:"auto",marginRight:"auto",emptyCells:"show"}))),to=(0,x.ZP)("span")((()=>({border:0,clip:"rect(0 0 0 0)",height:1,margin:-1,overflow:"hidden",padding:0,position:"absolute",top:20,width:1}))),ro=(0,x.ZP)(Us.Z)((({theme:e})=>({padding:e.spacing(2)}))),no=(0,x.ZP)(fe.Z)((({theme:e})=>({padding:e.spacing(1)}))),ao=(0,x.ZP)("div")((()=>({width:"100%",position:"relative"}))),so=(0,x.ZP)(Fs.Z)((({theme:e})=>({backgroundColor:"rgba(255,255,255,0.85)",borderBottomWidth:e.spacing(.5),"&:hover":{backgroundColor:"lightseagreen !important"}}))),oo=(0,x.ZP)(O.Z)((({theme:e})=>({margin:e.spacing(0,1,0,0)}))),lo=(0,x.ZP)(Ls.Z)((({theme:e})=>({borderBottomWidth:e.spacing(.5),borderColor:"rgba(200,146,110,0.7)",paddingBottom:0,paddingTop:e.spacing(.5),paddingLeft:e.spacing(1),paddingRight:e.spacing(.5)}))),io=(0,x.ZP)(Gs.Z)((({theme:e})=>({backgroundColor:"rgba(90,184,152,0.8)",borderBottomLeftRadius:e.spacing(1),borderBottomRightRadius:e.spacing(1)})));function co(e){var t,r,a,s;const{isLoading:o,onChangeSearchParams:l,errorMessage:i,rows:c,total:u,rowDef:m}=e,[p,d]=n.useState(new Js(null!=(t=e.orderBy)?t:"",null!=(r=e.order)?r:"asc",(null!=(a=e.page)?a:1)-1,null!=(s=e.rowsPerPage)?s:5,e.columns.filter((e=>e.filter&&e.filter.value)).map((e=>{var t,r;return new qs(e.propertyName,null!=(r=null==(t=e.filter)?void 0:t.value)?r:"")})))),h=()=>new Js(p.orderBy,p.order,p.page-1,p.rowsPerPage,p.filters);n.useEffect((()=>{g((()=>h()))}),[]);const g=e=>{if(o)return;const t=e();l(t)},E=()=>u<1;return n.createElement(ao,null,n.createElement(Oe.Z,{sx:{position:"absolute",zIndex:e=>e.zIndex.drawer-1,color:"#fff"},open:o},n.createElement(me.Z,{color:"inherit"})),n.createElement(Qs,null,n.createElement($s.Z,null,n.createElement(eo,{"aria-labelledby":"tableTitle",size:"medium","aria-label":"exTable"},n.createElement(Xs,{columns:e.columns,order:p.order,orderBy:p.orderBy,onRequestSort:e=>{g((()=>{const t=p.orderBy===e&&"asc"===p.order?"desc":"asc",r=h();return r.order=t,r.orderBy=e,r.page=0,d(r),r}))},onRequestFilter:e=>{g((()=>{let t=[...p.filters];const r=t.find((t=>t.propertyName===e.propertyName));r?r.value=e.value:t.push(e),t=t.filter((e=>e.value));const n=h();return n.filters=t,n.page=0,d(n),n}))},disabledSort:u<=1,hideFilter:!!i}),n.createElement(Ws.Z,null,i?n.createElement(so,null,n.createElement(Ls.Z,{colSpan:e.columns.length},n.createElement(Ie.Z,{sx:{textAlign:"center"},error:!0},i))):E()?n.createElement(so,null,n.createElement(Ls.Z,{colSpan:e.columns.length},"Нет данных")):n.createElement(n.Fragment,null,c.map((t=>n.createElement(so,{className:`${(null==m?void 0:m.getClassName)?m.getClassName(t):""}`,sx:(null==m?void 0:m.getSx)?m.getSx(t):{},hover:!0,tabIndex:-1,key:e.propertyToKey(t)},e.columns.map(((e,r)=>{var a;return n.createElement(Ls.Z,{key:`${e.propertyName}_${r}`,align:null!=(a=e.alignCell)?a:"left",sx:{paddingBottom:0,paddingTop:0,paddingLeft:e=>e.spacing(1),paddingRight:e=>e.spacing(.5)}},e.renderDataCell?e.renderDataCell(t):function(e,t){return n.createElement(n.Fragment,null,e[t.propertyName]," ")}(t,e))}))))))),n.createElement(Hs.Z,null,n.createElement(Fs.Z,{sx:{padding:0}},n.createElement(io,{colSpan:e.columns.length,backIconButtonProps:{"aria-label":"Предыдущая страница"},nextIconButtonProps:{"aria-label":"Следующая страница"},labelRowsPerPage:"Кол-во строк на странице",labelDisplayedRows:({from:e,to:t,count:r})=>`${e}-${t} из ${-1!==r?r:"больше чем "+t}`,rowsPerPageOptions:E()?[]:u>10?[5,10,25]:u>5?[5,10]:[],count:u,rowsPerPage:p.rowsPerPage,page:p.page-1,onPageChange:(e,t)=>{return r=this,null,n=function*(){g((()=>{const e=h();return e.page=t,d(e),e}))},new Promise(((e,t)=>{var a=e=>{try{o(n.next(e))}catch(e){t(e)}},s=e=>{try{o(n.throw(e))}catch(e){t(e)}},o=t=>t.done?e(t.value):Promise.resolve(t.value).then(a,s);o((n=n.apply(r,null)).next())}));var r,n},onRowsPerPageChange:e=>{g((()=>{const t=parseInt(e.target.value,10),r=h();return r.page=0,r.rowsPerPage=t,d(r),r}))}})))))))}class uo{constructor(e,t,r){this.items=e,this.totalPages=t,this.total=r}}class mo{constructor(e,t,r,n,a,s,o){this.id=e,this.fullName=t,this.birthday=r,this.phoneNumber=n,this.email=a,this.state=s,this.employmentDate=o}}var po,ho;(ho=po||(po={})).Active="Active",ho.Dismissed="Dismissed";class go{getBaseUrl(){return`/api/employees/${As.selectedOrganizationId}`}getEmployees(e){const t=`${this.getBaseUrl()}/search`;return Tr.createHttpClientWithAuth().post(t,e)}createEmployee(e){const t=this.getBaseUrl();return Tr.createHttpClientWithAuth().post(t,e)}updateEmployee(e){const t=`${this.getBaseUrl()}/${e.id}`;return Tr.createHttpClientWithAuth().put(t,e)}getEmployee(e){const t=`${this.getBaseUrl()}/${e}`;return Tr.createHttpClientWithAuth().get(t)}}const Eo=class{static GetEmployeesClient(){return new go}static GetMediator(){return Eo.mediator}};let fo=Eo;fo.mediator=new br;class vo{constructor(e){this.args=e,this.employeesClient=fo.GetEmployeesClient()}execute(){return this.employeesClient.getEmployees(this.args).then((e=>new uo(e.items.map((e=>new mo(e.id,new vr(e.fullName.name,e.fullName.surname,e.fullName.patronymic),e.birthday,e.phoneNumber,e.email,e.state,e.employmentDate))),e.totalPages,e.total)))}}class yo{constructor(e,t){this.sortType="asc"==e?bo.Asc:bo.Desc,this.orderBy=t}}var bo,wo;(wo=bo||(bo={}))[wo.Asc=0]="Asc",wo[wo.Desc=1]="Desc";class Oo{constructor(e,t){this.value=e,this.columnName=t}}class xo extends class{constructor(e){this.pageSize=e.rowsPerPage,this.page=e.page,this.sort=new yo(e.order,e.orderBy),this.filters=e.filters.map((e=>new Oo(e.value,e.propertyName)))}}{constructor(e){super(e)}}var Po=r(7957),No=Object.defineProperty,Co=Object.defineProperties,Ro=Object.getOwnPropertyDescriptors,To=Object.getOwnPropertySymbols,So=Object.prototype.hasOwnProperty,Zo=Object.prototype.propertyIsEnumerable,Io=(e,t,r)=>t in e?No(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,Ao=(e,t)=>{for(var r in t||(t={}))So.call(t,r)&&Io(e,r,t[r]);if(To)for(var r of To(t))Zo.call(t,r)&&Io(e,r,t[r]);return e},ko=(e,t)=>Co(e,Ro(t)),Mo=(e,t,r)=>new Promise(((n,a)=>{var s=e=>{try{l(r.next(e))}catch(e){a(e)}},o=e=>{try{l(r.throw(e))}catch(e){a(e)}},l=e=>e.done?n(e.value):Promise.resolve(e.value).then(s,o);l((r=r.apply(e,t)).next())}));class Do{}class Vo{constructor(e,t,r,n){this.errorMessageByRows=e,this.filterParams=t,this.searchParams=r,this.pagination=n}}class jo extends gt{constructor(){super(...arguments),this.state=new ar({items:[new hr(_o,"Все"),new hr(po.Active,"Действующие"),new hr(po.Dismissed,"Уволенные")],validations:[new or],title:"",initialValue:po.Active.toString()})}}const _o="All",Fo=fo.GetMediator(),Bo={buttonAdd:{fontSize:"var(--EAS-FONT-SIZE-BUTTON-TEXT)"},filters:{width:"100%",position:"relative"},filtersBackdrop:{position:"absolute",zIndex:e=>e.zIndex.drawer-1,color:"#fff"},filtersPaper:{padding:e=>e.spacing(.5),marginBottom:e=>e.spacing(2),display:"flex",alignItems:"center"},filtersPanelButton:{width:"50%",textAlign:"right",paddingRight:e=>e.spacing(1)},filtersPanel:{width:"50%"},iconButton:{color:e=>e.palette.primary.main,"&:hover":{color:e=>e.palette.secondary.dark}}};function zo(){const e=(0,o.s0)(),t=new jo,[r,a]=Rt(new Vo("",new Do,new Js("","asc",1,10,[]))),[s,l]=Nt((e=>Mo(this,null,(function*(){const n=e.tag;if(n){if(!t.validation())return void a((e=>ko(Ao({},e),{searchParams:n})));const e=r.filterParams;e.state=po[t.state.getValue()];const s=new xo(n);s.state=e.state;const o=new vo(s);yield Fo.send(o).then((e=>{a((t=>ko(Ao({},t),{errorMessageByRows:"",pagination:e,searchParams:n})))})).catch((e=>{const t=fr.createFromPromiseCatch(e).message;a((e=>ko(Ao({},e),{errorMessageByRows:"Ошибка получения данных: "+t,pagination:void 0,searchParams:n})))}))}}))),[]);t.state.props.onChangeValue=()=>Mo(this,null,(function*(){const e=r.searchParams;e.page=0,yield l(e),a((t=>ko(Ao({},t),{searchParams:e})))}));const i=()=>{e(ma.CREATE_EMPLOYEE)},c=()=>n.createElement(y.Z,{component:"div",sx:Bo.filters},n.createElement(Oe.Z,{sx:Bo.filtersBackdrop,open:s}),n.createElement(fe.Z,{sx:Bo.filtersPaper},n.createElement(y.Z,{component:"div",sx:Bo.filtersPanel},t.state.view()),n.createElement(y.Z,{sx:Bo.filtersPanelButton},n.createElement(k,{sx:Bo.buttonAdd,onClick:i},"Добавить нового сотрудника"))));return n.createElement(n.Fragment,null,n.createElement(c,null),n.createElement(co,{rows:null!=(m=null==(u=r.pagination)?void 0:u.items)?m:[],onChangeSearchParams:l,total:null!=(d=null==(p=r.pagination)?void 0:p.total)?d:0,isLoading:s,errorMessage:r.errorMessageByRows,rowDef:{getSx:e=>{return r=e,t.state.getValue()===_o&&(e=>!!e.state&&e.state===po.Dismissed)(r)?{backgroundColor:"lightpink"}:{};var r}},columns:[{propertyName:"fullName",description:"ФИО",filter:new Ks,renderDataCell:e=>n.createElement(n.Fragment,null,e.fullName.ToString())},{propertyName:"birthday",description:"Дата рождения",disibledSort:!0,renderDataCell:e=>n.createElement(n.Fragment,null,xt(e.birthday))},{propertyName:"phone",description:"Телефон",disibledSort:!0,renderDataCell:e=>{return n.createElement(n.Fragment,null,(t=e.phoneNumber)&&11===t.length?`+${t.substring(0,1)} ${t.substring(1,4)} ${t.substring(4,7)} ${t.substring(7,9)} ${t.substring(9,11)}`:t||"");var t}},{propertyName:"email",description:"Эл. адрес",disibledSort:!0},{propertyName:"",description:"",disibledSort:!0,renderDataCell:t=>n.createElement(n.Fragment,null,n.createElement(wa.Z,{title:"Редактировать",placement:"left-start"},n.createElement(Ht.Z,{sx:Bo.iconButton,size:"medium",onClick:()=>(t=>{const r=(0,o.Gn)(ma.EDIT_EMPLOYEE,{id:t});e(r)})(t.id)},n.createElement(Po.Z,null))))}],propertyToKey:e=>e.id,orderBy:"fullName",order:"asc"}));var u,m,p,d}function Uo(){return n.createElement(n.Fragment,null,n.createElement(ye,null,n.createElement(zo,null)))}class Lo{constructor(e,t,r,n,a){this.fullName=e,this.birthday=t,this.phoneNumber=r,this.email=n,this.employmentDate=a}}class Go{constructor(e,t,r,n,a){this.fullName=e,this.birthday=t,this.phoneNumber=r,this.email=n,this.employmentDate=a,this.employeesClient=fo.GetEmployeesClient()}execute(){const e={name:this.fullName.name,surname:this.fullName.surname,patronymic:this.fullName.patronymic},t=new Lo(e,this.birthday,this.phoneNumber,this.email,this.employmentDate);return this.employeesClient.createEmployee(t).then((e=>new mo(e.id,new vr(e.fullName.name,e.fullName.surname,e.fullName.patronymic),e.birthday,e.phoneNumber,e.email,e.state,e.employmentDate)))}}var $o=Object.defineProperty,Wo=Object.defineProperties,Ho=Object.getOwnPropertyDescriptors,Ko=Object.getOwnPropertySymbols,qo=Object.prototype.hasOwnProperty,Jo=Object.prototype.propertyIsEnumerable,Yo=(e,t,r)=>t in e?$o(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r;class Xo{constructor(e=""){this.errorMessage=e}}class Qo extends gt{constructor(){super(...arguments),this.surname=new $t({validations:[new or,new ir(50)],title:"Фамилия",isAutofocus:!0}),this.name=new $t({validations:[new or,new ir(50)],title:"Имя"}),this.patronymic=new $t({validations:[new ir(50)],title:"Отчество"}),this.phoneNumber=new Xt({validations:[new lr],title:"Номер телефона"}),this.email=new $t({validations:[new pr],title:"Эл. почта"}),this.birthday=new Yt({validations:[new or,new ur(Ot(new Date,-16)),cr.getMinDate()],title:"Дата рождения"}),this.employmentDate=new Yt({validations:[new or,new ur(new Date),cr.getMinDate()],title:"Дата приёма на работу"})}}const el=fo.GetMediator(),tl={buttonCancel:{marginRight:e=>e.spacing(2)}};function rl(){const[e,t]=Rt(new Xo),r=(0,o.s0)(),a=new Qo,[s,l]=Nt((()=>{return e=this,null,n=function*(){if(!a.validation())return;const e=new Go(new vr(a.name.getValue(),a.surname.getValue(),a.patronymic.getValue()),a.birthday.getValueToJson(),a.phoneNumber.getValue(),a.email.getValue(),a.employmentDate.getValueToJson());yield el.send(e).then((e=>{r(ma.EMPLOYEES)})).catch((e=>{t((t=>{return r=((e,t)=>{for(var r in t||(t={}))qo.call(t,r)&&Yo(e,r,t[r]);if(Ko)for(var r of Ko(t))Jo.call(t,r)&&Yo(e,r,t[r]);return e})({},t),n={errorMessage:fr.createFromPromiseCatch(e).message},Wo(r,Ho(n));var r,n}))}))},new Promise(((t,r)=>{var a=e=>{try{o(n.next(e))}catch(e){r(e)}},s=e=>{try{o(n.throw(e))}catch(e){r(e)}},o=e=>e.done?t(e.value):Promise.resolve(e.value).then(a,s);o((n=n.apply(e,null)).next())}));var e,n}),[r]);return a.setDisabled(s),n.createElement(dt.Z,{component:"main",maxWidth:"md"},n.createElement(it,null,n.createElement(ze,null,"Добавление сотрудника в организацию"),n.createElement(Ae,{message:e.errorMessage}),n.createElement(Ze,null,n.createElement(Fe,null,a.surname.view(),a.name.view(),a.patronymic.view()),n.createElement(Fe,null,a.birthday.view(),a.employmentDate.view()),n.createElement(Fe,null,a.phoneNumber.view(),a.email.view())),n.createElement(tt,null,n.createElement(ce,{disabled:s,onClick:()=>{r(ma.EMPLOYEES)},sx:tl.buttonCancel},"Отмена"),n.createElement(k,{disabled:s,onClick:l},"Создать"))))}function nl(){return n.createElement(n.Fragment,null,n.createElement(ye,null,n.createElement(rl,null)))}class al{constructor(e){this.employeeId=e,this.employeesClient=fo.GetEmployeesClient()}execute(){return this.employeesClient.getEmployee(this.employeeId).then((e=>new mo(e.id,new vr(e.fullName.name,e.fullName.surname,e.fullName.patronymic),e.birthday,e.phoneNumber,e.email,e.state,e.employmentDate)))}}class sl{constructor(e,t,r,n,a,s){this.id=e,this.fullName=t,this.birthday=r,this.phoneNumber=n,this.email=a,this.employmentDate=s}}class ol{constructor(e,t,r,n,a,s){this.id=e,this.fullName=t,this.birthday=r,this.phoneNumber=n,this.email=a,this.employmentDate=s,this.employeesClient=fo.GetEmployeesClient()}execute(){const e={name:this.fullName.name,surname:this.fullName.surname,patronymic:this.fullName.patronymic},t=new sl(this.id,e,this.birthday,this.phoneNumber,this.email,this.employmentDate);return this.employeesClient.updateEmployee(t).then((e=>new mo(e.id,new vr(e.fullName.name,e.fullName.surname,e.fullName.patronymic),e.birthday,e.phoneNumber,e.email,e.state,e.employmentDate)))}}var ll=Object.defineProperty,il=Object.defineProperties,cl=Object.getOwnPropertyDescriptors,ul=Object.getOwnPropertySymbols,ml=Object.prototype.hasOwnProperty,pl=Object.prototype.propertyIsEnumerable,dl=(e,t,r)=>t in e?ll(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,hl=(e,t)=>{for(var r in t||(t={}))ml.call(t,r)&&dl(e,r,t[r]);if(ul)for(var r of ul(t))pl.call(t,r)&&dl(e,r,t[r]);return e},gl=(e,t)=>il(e,cl(t)),El=(e,t,r)=>new Promise(((n,a)=>{var s=e=>{try{l(r.next(e))}catch(e){a(e)}},o=e=>{try{l(r.throw(e))}catch(e){a(e)}},l=e=>e.done?n(e.value):Promise.resolve(e.value).then(s,o);l((r=r.apply(e,t)).next())}));class fl{constructor(e,t="",r=!1){this.employee=e,this.errorMessage=t,this.isErrorLoadingByEmployee=r}}class vl extends gt{constructor(){super(...arguments),this.surname=new $t({validations:[new or,new ir(50)],title:"Фамилия",isAutofocus:!0}),this.name=new $t({validations:[new or,new ir(50)],title:"Имя"}),this.patronymic=new $t({validations:[new ir(50)],title:"Отчество"}),this.phoneNumber=new Xt({validations:[new lr],title:"Номер телефона"}),this.email=new $t({validations:[new pr],title:"Эл. почта"}),this.birthday=new Yt({validations:[new or,new ur(Ot(new Date,-16)),cr.getMinDate()],title:"Дата рождения"}),this.employmentDate=new Yt({validations:[new or,new ur(new Date),cr.getMinDate()],title:"Дата приёма на работу"})}}const yl=fo.GetMediator(),bl={buttonCancel:{marginRight:e=>e.spacing(2)}};function wl(){const e=(0,o.UO)(),[t,r]=Nt((()=>El(this,null,(function*(){const t=e.id,r=new al(t);yield yl.send(r).then((e=>{e.fullName&&(i.surname.setValue(e.fullName.surname),i.name.setValue(e.fullName.name),i.patronymic.setValue(e.fullName.patronymic)),i.birthday.setValue(e.birthday),i.employmentDate.setValue(e.employmentDate),i.phoneNumber.setValue(e.phoneNumber),i.email.setValue(e.email),s((t=>gl(hl({},t),{employee:e,isErrorLoadingByEmployee:!1,errorMessage:""})))})).catch((e=>{c(e)}))}))),[],(()=>{s((e=>gl(hl({},e),{errorMessage:"Невозможно получить данные по сотруднику. Попробуйте обновить страницу",isErrorLoadingByEmployee:!0,employee:void 0})))})),[a,s]=Rt(new fl,r),l=(0,o.s0)(),i=new vl,c=e=>{s((t=>gl(hl({},t),{errorMessage:fr.createFromPromiseCatch(e).message,isErrorLoadingByEmployee:!1})))},[u,m]=Nt((()=>El(this,null,(function*(){var e;if(!i.validation())return;if(!a.employee)return void s((e=>gl(hl({},e),{errorMessage:"Вернитесь в список сотрудников и выберите для редактирования нужного сотрудника",isErrorLoadingByEmployee:!1})));const t=new ol(null==(e=a.employee)?void 0:e.id,new vr(i.name.getValue(),i.surname.getValue(),i.patronymic.getValue()),i.birthday.getValueToJson(),i.phoneNumber.getValue(),i.email.getValue(),i.employmentDate.getValueToJson());yield yl.send(t).then((e=>{l(ma.EMPLOYEES)})).catch((e=>{c(e)}))}))),[l,a],c),p=()=>t||u||a.isErrorLoadingByEmployee;return i.setDisabled(p()),n.createElement(dt.Z,{component:"main",maxWidth:"md"},n.createElement(it,null,n.createElement(ze,null,"Профиль сотрудника"),n.createElement(Ae,{message:a.errorMessage}),n.createElement(Ze,null,n.createElement(Fe,null,i.surname.view(),i.name.view(),i.patronymic.view()),n.createElement(Fe,null,i.birthday.view(),i.employmentDate.view()),n.createElement(Fe,null,i.phoneNumber.view(),i.email.view())),n.createElement(tt,null,n.createElement(ce,{disabled:p(),onClick:()=>{l(ma.EMPLOYEES)},sx:bl.buttonCancel},"Отмена"),n.createElement(k,{disabled:p(),onClick:m},"Сохранить"))))}function Ol(){return n.createElement(n.Fragment,null,n.createElement(ye,null,n.createElement(wl,null)))}function xl({children:e}){if(m.getIsExpired())return n.createElement(o.Fg,{to:E.LOGIN,replace:!0});if(!ha.selectedOgranization){const e=(0,o.TH)().pathname;if(e!==v.ORGANIZATIONS&&e!==v.CREATE_ORGANIZATION)return n.createElement(o.Fg,{to:v.ORGANIZATIONS,replace:!0})}return n.createElement(Da,null,e)}function Pl(){return m.getIsExpired()?n.createElement(un,null):n.createElement(o.Fg,{to:v.ORGANIZATIONS,replace:!0})}function Nl({children:e}){return n.createElement(Da,null,e)}function Cl(){const e=(0,o.s0)();n.useEffect((()=>{var t;document.getElementsByTagName("title")[0].innerHTML="Система учёта сотрудников",t=e,Cr.setHandlerErrConnectionRefuused((()=>new Promise((()=>{const e=location.pathname;e.toLowerCase()!==E.NO_CONNECTION_TO_SERVER.toLowerCase()&&t({pathname:E.NO_CONNECTION_TO_SERVER,search:"?"+new URLSearchParams({[gr.TARGET]:e}).toString()})})))),Cr.addResponseHandlerByStatusCode(401,(()=>new Promise((()=>{t(E.LOGIN)})))),Cr.addResponseHandlerByStatusCode(403,((e,r,n)=>new Promise((()=>{n===location.href&&t({pathname:E.FORBIDDEN,search:"?"+new URLSearchParams({[gr.FORBIDDEN_RESOURCE]:e.url}).toString()})})))),Cr.addResponseHandlerByStatusCode(404,((e,r,n)=>{if(m.get())return new Promise((()=>{n===location.href&&t(E.NOT_FOUND)}))})),class{static configuration(e){Or.RegistraionConsumer(new Ts(e))}}.configuration(e),class{static configuration(e){Or.RegistraionConsumer(new Zs(e)),Or.RegistraionConsumer(new Ss(e)),Or.RegistraionConsumer(new Is(e))}}.configuration(e),class{static configuration(e){Or.RegistraionConsumer(new ks)}}.configuration(e),class{static configuration(e){}}.configuration(e)}),[]);const t=(0,l.Z)({palette:{primary:{main:"#00897b",light:"#4ebaaa",dark:"#005b4f"},secondary:{main:"#ba68c8",light:"#ee98fb",dark:"#883997"},success:{main:"#ffb74d",dark:"#c88719",light:"#ffe97d"}}});return n.createElement(i.Z,{theme:t},n.createElement(o.Z5,null,n.createElement(o.AW,{path:E.ROOT,element:n.createElement(xl,null,n.createElement(w,null))}),n.createElement(o.AW,{path:E.NOT_FOUND,element:n.createElement(Nl,null,n.createElement(Fa,null))}),n.createElement(o.AW,{path:E.FORBIDDEN,element:n.createElement(Nl,null,n.createElement(ja,null))}),n.createElement(o.AW,{path:E.LOGIN,element:n.createElement(Pl,null)}),n.createElement(o.AW,{path:E.NO_CONNECTION_TO_SERVER,element:n.createElement(za,null)}),n.createElement(o.AW,{path:h.REGISTRATION,element:n.createElement(On,null)}),n.createElement(o.AW,{path:h.JOIN_TO_ORGANIZATION,element:n.createElement(ia,null)}),n.createElement(o.AW,{path:h.AGREEMENT_USER,element:n.createElement(Un,null)}),n.createElement(o.AW,{path:h.USER_REGISTRATION,element:n.createElement(Bn,null)}),n.createElement(o.AW,{path:v.ORGANIZATIONS,element:n.createElement(xl,null,n.createElement(ps,null))}),n.createElement(o.AW,{path:v.CREATE_ORGANIZATION,element:n.createElement(xl,null,n.createElement(Rs,null))}),n.createElement(o.AW,{path:ma.EMPLOYEES,element:n.createElement(xl,null,n.createElement(Uo,null))}),n.createElement(o.AW,{path:ma.CREATE_EMPLOYEE,element:n.createElement(xl,null,n.createElement(nl,null))}),n.createElement(o.AW,{path:ma.EDIT_EMPLOYEE,element:n.createElement(xl,null,n.createElement(Ol,null))})))}var Rl=document.getElementById("app");a.render(n.createElement(s.VK,null,n.createElement(Cl,null)),Rl)}},e=>{e.O(0,[216],(()=>(8084,e(e.s=8084)))),e.O()}]);
//# sourceMappingURL=main.1c17aa18e969ebdf1321.js.map